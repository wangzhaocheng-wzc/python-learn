<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NoSQLæ•°æ®åº“æ–°æ‰‹å…¥é—¨</title>
    
    <!-- å¢å¼ºçš„CSSæ ·å¼ -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }

        /* è¿›åº¦æ¡æ ·å¼ */
        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            z-index: 1000;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #00d2ff, #3a7bd5);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* æœç´¢åŠŸèƒ½æ ·å¼ */
        .search-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 999;
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 8px 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
        }

        .search-input {
            border: none;
            outline: none;
            padding: 8px 12px;
            border-radius: 20px;
            width: 200px;
            font-size: 14px;
            background: transparent;
        }

        .search-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            margin-left: 5px;
            transition: transform 0.2s;
        }

        .search-btn:hover {
            transform: scale(1.05);
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            max-height: 300px;
            overflow-y: auto;
            display: none;
            margin-top: 5px;
        }

        .search-result-item {
            padding: 10px 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background 0.2s;
        }

        .search-result-item:hover {
            background: #f8f9fa;
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-highlight {
            background: yellow;
            padding: 2px 4px;
            border-radius: 3px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            margin-top: 20px;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            padding: 40px 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            position: relative;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            animation: fadeInDown 1s ease-out;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            animation: fadeInUp 1s ease-out 0.3s both;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .nav {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 4px;
            z-index: 100;
        }

        .nav h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .nav-links {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .nav-links a {
            background: #667eea;
            color: white;
            padding: 8px 16px;
            text-decoration: none;
            border-radius: 20px;
            font-size: 0.9em;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .nav-links a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .nav-links a:hover::before {
            left: 100%;
        }

        .nav-links a:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }

        .section {
            background: white;
            padding: 30px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section h2 {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 20px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
            position: relative;
        }

        .section h2::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #e74c3c, #f39c12);
            transition: width 0.3s ease;
        }

        .section h2:hover::after {
            width: 100%;
        }

        .section h3 {
            color: #555;
            font-size: 1.3em;
            margin: 20px 0 10px 0;
            position: relative;
            padding-left: 20px;
        }

        .section h3::before {
            content: 'â–¶';
            position: absolute;
            left: 0;
            color: #667eea;
            transition: transform 0.3s;
        }

        .section h3:hover::before {
            transform: translateX(5px);
        }

        .highlight-box {
            background: linear-gradient(135deg, #e8f4fd, #d1ecf1);
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            position: relative;
            overflow: hidden;
        }

        .highlight-box::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: rotate(45deg);
            transition: transform 0.6s;
        }

        .highlight-box:hover::before {
            transform: rotate(45deg) translate(50%, 50%);
        }

        .simple-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        .simple-table th,
        .simple-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
            transition: all 0.3s;
        }

        .simple-table th {
            background: linear-gradient(135deg, #667eea, #5a67d8);
            color: white;
        }

        .simple-table tr:nth-child(even) {
            background: #f9f9f9;
        }

        .simple-table tr:hover {
            background: #e8f4fd;
            transform: scale(1.01);
        }

        .code-box {
            background: linear-gradient(135deg, #2d3748, #4a5568);
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .code-box::before {
            content: 'ğŸ“‹ ç‚¹å‡»å¤åˆ¶';
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 12px;
            opacity: 0.7;
            font-family: 'Microsoft YaHei', sans-serif;
        }

        .code-box:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .tip-box {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border-left: 5px solid #f39c12;
            position: relative;
            transition: transform 0.3s;
        }

        .tip-box:hover {
            transform: translateX(5px);
        }

        .tip-box::before {
            content: 'ğŸ’¡';
            position: absolute;
            top: 15px;
            left: -15px;
            background: #f39c12;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .tip-box strong {
            color: #856404;
        }

        /* è¿”å›é¡¶éƒ¨æŒ‰é’® */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
            opacity: 0;
            visibility: hidden;
            z-index: 1000;
        }

        .back-to-top.show {
            opacity: 1;
            visibility: visible;
        }

        .back-to-top:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
                margin-top: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .nav-links {
                flex-direction: column;
            }

            .nav {
                position: static;
            }

            .search-container {
                position: static;
                margin: 10px;
                justify-content: center;
            }

            .search-input {
                width: 150px;
            }

            .back-to-top {
                bottom: 20px;
                right: 20px;
                width: 45px;
                height: 45px;
            }
        }
    </style>
</head>
<body>
    <!-- è¿›åº¦æ¡ -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <!-- æœç´¢åŠŸèƒ½ -->
    <div class="search-container">
        <input type="text" class="search-input" id="searchInput" placeholder="æœç´¢å†…å®¹...">
        <button class="search-btn" onclick="performSearch()">ğŸ”</button>
        <div class="search-results" id="searchResults"></div>
    </div>

    <div class="container">
        <!-- é¡µé¢æ ‡é¢˜ -->
        <div class="header">
            <h1>ğŸ“Š NoSQLæ•°æ®åº“æ–°æ‰‹å…¥é—¨</h1>
            <p>ç®€å•æ˜“æ‡‚çš„NoSQLå­¦ä¹ æŒ‡å—</p>
        </div>

        <!-- å¯¼èˆªèœå• -->
        <div class="nav">
            <h3>ğŸ“š å­¦ä¹ ç›®å½•</h3>
            <div class="nav-links">
                <a href="#what-is-nosql">ä»€ä¹ˆæ˜¯NoSQL</a>
                <a href="#types">æ•°æ®åº“ç±»å‹</a>
                <a href="#redis-basic">RedisåŸºç¡€</a>
                <a href="#redis-python">Redisä¸Python</a>
                <a href="#mongodb-basic">MongoDBåŸºç¡€</a>
                <a href="#mongodb-python">MongoDBä¸Python</a>
                <a href="#performance">æ€§èƒ½ä¼˜åŒ–</a>
                <a href="#security">å®‰å…¨é…ç½®</a>
                <a href="#when-to-use">ä½•æ—¶ä½¿ç”¨</a>
                <a href="#practice">å®æˆ˜ç»ƒä¹ </a>
            </div>
        </div>

        <!-- ä»€ä¹ˆæ˜¯NoSQL -->
        <div id="what-is-nosql" class="section">
            <h2>ğŸ¤” ä»€ä¹ˆæ˜¯NoSQLï¼Ÿ</h2>
            
            <div class="highlight-box">
                <strong>ç®€å•ç†è§£ï¼š</strong>NoSQLå°±æ˜¯"ä¸åªæ˜¯SQL"çš„æ„æ€ï¼Œå®ƒæ˜¯ä¸€ç§æ–°å‹çš„æ•°æ®åº“ï¼Œä¸åƒä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“é‚£æ ·ä½¿ç”¨è¡¨æ ¼æ¥å­˜å‚¨æ•°æ®ã€‚
            </div>

            <h3>ä¸ºä»€ä¹ˆéœ€è¦NoSQLï¼Ÿ</h3>
            <p>æƒ³è±¡ä¸€ä¸‹ï¼š</p>
            <ul style="margin-left: 20px; margin-top: 10px;">
                <li>ğŸ“± <strong>æ•°æ®é‡çˆ†ç‚¸ï¼š</strong>ç°åœ¨æ¯å¤©äº§ç”Ÿçš„æ•°æ®å¤ªå¤šäº†ï¼ˆå¾®ä¿¡èŠå¤©ã€æŠ–éŸ³è§†é¢‘ã€æ·˜å®è´­ç‰©...ï¼‰</li>
                <li>âš¡ <strong>é€Ÿåº¦è¦æ±‚ï¼š</strong>ç”¨æˆ·å¸Œæœ›ç§’å¼€ç½‘é¡µï¼Œä¸èƒ½ç­‰å¤ªä¹…</li>
                <li>ğŸ”„ <strong>æ•°æ®ç±»å‹å¤šæ ·ï¼š</strong>ä¸åªæ˜¯æ•°å­—å’Œæ–‡å­—ï¼Œè¿˜æœ‰å›¾ç‰‡ã€è§†é¢‘ã€åœ°ç†ä½ç½®ç­‰</li>
            </ul>

            <div class="tip-box">
                <strong>ğŸ’¡ å°è´´å£«ï¼š</strong>å°±åƒä¼ ç»Ÿçš„æ–‡ä»¶æŸœï¼ˆå…³ç³»å‹æ•°æ®åº“ï¼‰è™½ç„¶æ•´é½ï¼Œä½†æ‰¾ä¸œè¥¿æ…¢ã€‚è€ŒNoSQLå°±åƒæ˜¯ä¸€ä¸ªæ™ºèƒ½ä»“åº“ï¼Œèƒ½å¿«é€Ÿæ‰¾åˆ°ä½ è¦çš„ä»»ä½•ä¸œè¥¿ï¼
            </div>
        </div>

        <!-- æ•°æ®åº“ç±»å‹ -->
        <div id="types" class="section">
            <h2>ğŸ“‹ NoSQLæ•°æ®åº“çš„ä¸»è¦ç±»å‹</h2>
            
            <p>NoSQLæ•°æ®åº“ä¸»è¦åˆ†ä¸º4ç§ç±»å‹ï¼Œæ¯ç§éƒ½æœ‰è‡ªå·±çš„ç‰¹ç‚¹ï¼š</p>

            <table class="simple-table">
                <thead>
                    <tr>
                        <th>ç±»å‹</th>
                        <th>ä»£è¡¨äº§å“</th>
                        <th>ç®€å•ç†è§£</th>
                        <th>é€‚åˆåœºæ™¯</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>é”®å€¼æ•°æ®åº“</strong></td>
                        <td>Redis</td>
                        <td>åƒå­—å…¸ä¸€æ ·ï¼Œä¸€ä¸ªé’¥åŒ™å¯¹åº”ä¸€ä¸ªå€¼</td>
                        <td>ç¼“å­˜ã€ä¼šè¯å­˜å‚¨</td>
                    </tr>
                    <tr>
                        <td><strong>æ–‡æ¡£æ•°æ®åº“</strong></td>
                        <td>MongoDB</td>
                        <td>å­˜å‚¨åƒJSONæ ¼å¼çš„æ–‡æ¡£</td>
                        <td>å†…å®¹ç®¡ç†ã€ç”¨æˆ·èµ„æ–™</td>
                    </tr>
                    <tr>
                        <td><strong>åˆ—æ—æ•°æ®åº“</strong></td>
                        <td>Cassandra</td>
                        <td>æŒ‰åˆ—å­˜å‚¨ï¼Œé€‚åˆå¤§æ•°æ®</td>
                        <td>æ—¥å¿—åˆ†æã€æ—¶é—´åºåˆ—</td>
                    </tr>
                    <tr>
                        <td><strong>å›¾æ•°æ®åº“</strong></td>
                        <td>Neo4j</td>
                        <td>å­˜å‚¨å…³ç³»ç½‘ç»œï¼Œåƒç¤¾äº¤ç½‘ç»œ</td>
                        <td>ç¤¾äº¤æ¨èã€çŸ¥è¯†å›¾è°±</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- RedisåŸºç¡€ -->
        <div id="redis-basic" class="section">
            <h2>ğŸ”´ Rediså…¥é—¨</h2>
            
            <div class="highlight-box">
                <strong>Redisæ˜¯ä»€ä¹ˆï¼Ÿ</strong>Redisæ˜¯ä¸€ä¸ªè¶…å¿«çš„å†…å­˜æ•°æ®åº“ï¼Œä¸»è¦ç”¨æ¥åšç¼“å­˜ï¼Œè®©ç½‘ç«™è®¿é—®æ›´å¿«ã€‚
            </div>

            <h3>Redisçš„ç‰¹ç‚¹</h3>
            <ul style="margin-left: 20px;">
                <li>âš¡ <strong>è¶…çº§å¿«ï¼š</strong>æ•°æ®å­˜åœ¨å†…å­˜é‡Œï¼Œè¯»å†™é€Ÿåº¦æå¿«</li>
                <li>ğŸ¯ <strong>å¤šç§æ•°æ®ç±»å‹ï¼š</strong>ä¸åªæ˜¯ç®€å•çš„æ–‡æœ¬ï¼Œè¿˜æ”¯æŒåˆ—è¡¨ã€é›†åˆç­‰</li>
                <li>ğŸ’¾ <strong>å¯ä»¥æŒä¹…åŒ–ï¼š</strong>è™½ç„¶åœ¨å†…å­˜é‡Œï¼Œä½†å¯ä»¥ä¿å­˜åˆ°ç¡¬ç›˜</li>
            </ul>

            <h3>ç®€å•çš„Rediså‘½ä»¤</h3>
            <div class="code-box">
# è®¾ç½®ä¸€ä¸ªé”®å€¼å¯¹<br>
SET name "å°æ˜"<br>
<br>
# è·å–å€¼<br>
GET name<br>
# è¿”å›ï¼š"å°æ˜"<br>
<br>
# è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆ10ç§’åè‡ªåŠ¨åˆ é™¤ï¼‰<br>
SETEX temp_data 10 "ä¸´æ—¶æ•°æ®"<br>
<br>
# æ“ä½œåˆ—è¡¨<br>
# å‘åˆ—è¡¨å·¦ä¾§æ·»åŠ å…ƒç´ <br>
LPUSH shopping_list "è‹¹æœ"<br>
LPUSH shopping_list "é¦™è•‰"<br>
<br>
# è·å–åˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ <br>
LRANGE shopping_list 0 -1<br>
# è¿”å›ï¼š["é¦™è•‰", "è‹¹æœ"]<br>
            </div>

            <div class="tip-box">
                <strong>ğŸ’¡ å®é™…åº”ç”¨ï¼š</strong>æ¯”å¦‚ä½ ç™»å½•ç½‘ç«™åï¼Œç½‘ç«™ä¼šæŠŠä½ çš„ç™»å½•çŠ¶æ€å­˜åœ¨Redisé‡Œï¼Œè¿™æ ·ä¸‹æ¬¡è®¿é—®å°±ä¸ç”¨é‡æ–°ç™»å½•äº†ï¼
            </div>
        </div>

        <!-- Redisä¸Python -->
        <div id="redis-python" class="section">
            <h2>ğŸ Redisä¸Pythonå®æˆ˜</h2>
            
            <div class="highlight-box">
                <strong>Pythonæ“ä½œRedisï¼š</strong>ä½¿ç”¨redis-pyåº“å¯ä»¥è½»æ¾åœ¨Pythonä¸­æ“ä½œRedisæ•°æ®åº“ã€‚
            </div>

            <h3>å®‰è£…Rediså’ŒPythonåº“</h3>
            <div class="code-box">
# å®‰è£…Redisï¼ˆWindowsï¼‰<br>
# ä¸‹è½½Redis for Windowsæˆ–ä½¿ç”¨Docker<br>
docker run -d -p 6379:6379 redis:latest<br>
<br>
# å®‰è£…Python Redisåº“<br>
pip install redis<br>
            </div>

            <h3>Pythonè¿æ¥Redis</h3>
            <div class="code-box">
import redis<br>
<br>
# è¿æ¥Redis<br>
r = redis.Redis(host='localhost', port=6379, db=0, decode_responses=True)<br>
<br>
# æµ‹è¯•è¿æ¥<br>
try:<br>
    r.ping()<br>
    print("Redisè¿æ¥æˆåŠŸï¼")<br>
except:<br>
    print("Redisè¿æ¥å¤±è´¥ï¼")<br>
            </div>

            <h3>åŸºæœ¬æ“ä½œç¤ºä¾‹</h3>
            <div class="code-box">
# å­—ç¬¦ä¸²æ“ä½œ<br>
r.set('user:1001:name', 'å¼ ä¸‰')<br>
r.set('user:1001:age', 25)<br>
name = r.get('user:1001:name')<br>
print(f"ç”¨æˆ·å§“åï¼š{name}")<br>
<br>
# è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰<br>
r.setex('verification_code', 300, '123456')  # 5åˆ†é’Ÿåè¿‡æœŸ<br>
<br>
# åˆ—è¡¨æ“ä½œ<br>
r.lpush('task_queue', 'task1', 'task2', 'task3')<br>
task = r.rpop('task_queue')  # ä»å³è¾¹å–å‡ºä»»åŠ¡<br>
print(f"å¤„ç†ä»»åŠ¡ï¼š{task}")<br>
<br>
# å“ˆå¸Œæ“ä½œ<br>
r.hset('user:1001', mapping={<br>
    'name': 'å¼ ä¸‰',<br>
    'age': 25,<br>
    'email': 'zhangsan@example.com'<br>
})<br>
user_info = r.hgetall('user:1001')<br>
print(f"ç”¨æˆ·ä¿¡æ¯ï¼š{user_info}")<br>
<br>
# é›†åˆæ“ä½œ<br>
r.sadd('online_users', 'user1', 'user2', 'user3')<br>
online_count = r.scard('online_users')<br>
print(f"åœ¨çº¿ç”¨æˆ·æ•°ï¼š{online_count}")<br>
            </div>

            <h3>å®ç”¨åœºæ™¯ï¼šç¼“å­˜ç³»ç»Ÿ</h3>
            <div class="code-box">
import json<br>
import time<br>
<br>
class RedisCache:<br>
    def __init__(self):<br>
        self.redis_client = redis.Redis(host='localhost', port=6379, db=0)<br>
    <br>
    def get_user_info(self, user_id):<br>
        # å…ˆä»ç¼“å­˜è·å–<br>
        cache_key = f"user:{user_id}"<br>
        cached_data = self.redis_client.get(cache_key)<br>
        <br>
        if cached_data:<br>
            print("ä»ç¼“å­˜è·å–æ•°æ®")<br>
            return json.loads(cached_data)<br>
        <br>
        # ç¼“å­˜æœªå‘½ä¸­ï¼Œä»æ•°æ®åº“è·å–ï¼ˆæ¨¡æ‹Ÿï¼‰<br>
        print("ä»æ•°æ®åº“è·å–æ•°æ®")<br>
        user_data = {<br>
            'id': user_id,<br>
            'name': f'ç”¨æˆ·{user_id}',<br>
            'email': f'user{user_id}@example.com'<br>
        }<br>
        <br>
        # å­˜å…¥ç¼“å­˜ï¼Œè¿‡æœŸæ—¶é—´1å°æ—¶<br>
        self.redis_client.setex(<br>
            cache_key, <br>
            3600, <br>
            json.dumps(user_data, ensure_ascii=False)<br>
        )<br>
        <br>
        return user_data<br>
<br>
# ä½¿ç”¨ç¤ºä¾‹<br>
cache = RedisCache()<br>
user = cache.get_user_info(1001)<br>
print(user)<br>
            </div>

            <div class="tip-box">
                <strong>ğŸ’¡ æ€§èƒ½æå‡ï¼š</strong>ä½¿ç”¨Redisç¼“å­˜å¯ä»¥å°†æ•°æ®åº“æŸ¥è¯¢é€Ÿåº¦æå‡10-100å€ï¼ç‰¹åˆ«é€‚åˆé¢‘ç¹æŸ¥è¯¢çš„æ•°æ®ã€‚
            </div>
        </div>

        <!-- MongoDBåŸºç¡€ -->
        <div id="mongodb-basic" class="section">
            <h2>ğŸƒ MongoDBå…¥é—¨</h2>
            
            <div class="highlight-box">
                <strong>MongoDBæ˜¯ä»€ä¹ˆï¼Ÿ</strong>MongoDBæ˜¯ä¸€ä¸ªæ–‡æ¡£æ•°æ®åº“ï¼Œæ•°æ®ä»¥ç±»ä¼¼JSONçš„æ ¼å¼å­˜å‚¨ï¼Œéå¸¸çµæ´»ã€‚
            </div>

            <h3>MongoDBçš„ç‰¹ç‚¹</h3>
            <ul style="margin-left: 20px;">
                <li>ğŸ“„ <strong>æ–‡æ¡£å­˜å‚¨ï¼š</strong>æ•°æ®åƒæ–‡æ¡£ä¸€æ ·å­˜å‚¨ï¼Œç»“æ„çµæ´»</li>
                <li>ğŸ” <strong>æŸ¥è¯¢å¼ºå¤§ï¼š</strong>å¯ä»¥è¿›è¡Œå¤æ‚çš„æŸ¥è¯¢æ“ä½œ</li>
                <li>ğŸ“ˆ <strong>æ˜“æ‰©å±•ï¼š</strong>å¯ä»¥è½»æ¾å¤„ç†å¤§é‡æ•°æ®</li>
            </ul>

            <h3>MongoDBåŸºæœ¬æ¦‚å¿µå¯¹æ¯”</h3>
            <table class="simple-table">
                <thead>
                    <tr>
                        <th>ä¼ ç»Ÿæ•°æ®åº“</th>
                        <th>MongoDB</th>
                        <th>è¯´æ˜</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>æ•°æ®åº“</td>
                        <td>æ•°æ®åº“</td>
                        <td>å­˜å‚¨æ•°æ®çš„å®¹å™¨</td>
                    </tr>
                    <tr>
                        <td>è¡¨</td>
                        <td>é›†åˆ(Collection)</td>
                        <td>å­˜å‚¨æ–‡æ¡£çš„åœ°æ–¹</td>
                    </tr>
                    <tr>
                        <td>è¡Œ</td>
                        <td>æ–‡æ¡£(Document)</td>
                        <td>ä¸€æ¡æ•°æ®è®°å½•</td>
                    </tr>
                    <tr>
                        <td>åˆ—</td>
                        <td>å­—æ®µ(Field)</td>
                        <td>æ•°æ®çš„å±æ€§</td>
                    </tr>
                </tbody>
            </table>

            <h3>ç®€å•çš„MongoDBæ“ä½œ</h3>
            <div class="code-box">
// æ’å…¥ä¸€ä¸ªç”¨æˆ·æ–‡æ¡£<br>
db.users.insertOne({<br>
    name: "å¼ ä¸‰",<br>
    age: 25,<br>
    email: "zhangsan@example.com",<br>
    hobbies: ["è¯»ä¹¦", "æ¸¸æ³³", "ç¼–ç¨‹"]<br>
})<br>
<br>
// æŸ¥æ‰¾ç”¨æˆ·<br>
db.users.find({name: "å¼ ä¸‰"})<br>
<br>
// æ›´æ–°ç”¨æˆ·å¹´é¾„<br>
db.users.updateOne(<br>
    {name: "å¼ ä¸‰"},<br>
    {$set: {age: 26}}<br>
)<br>
<br>
// åˆ é™¤ç”¨æˆ·<br>
db.users.deleteOne({name: "å¼ ä¸‰"})<br>
            </div>

            <div class="tip-box">
                <strong>ğŸ’¡ å®é™…åº”ç”¨ï¼š</strong>å¾ˆå¤šç½‘ç«™çš„ç”¨æˆ·èµ„æ–™ã€å•†å“ä¿¡æ¯ã€æ–‡ç« å†…å®¹éƒ½å­˜å‚¨åœ¨MongoDBä¸­ï¼Œå› ä¸ºè¿™äº›æ•°æ®ç»“æ„æ¯”è¾ƒçµæ´»ï¼
            </div>
        </div>

        <!-- MongoDBä¸Python -->
        <div id="mongodb-python" class="section">
            <h2>ğŸ MongoDBä¸Pythonå®æˆ˜</h2>
            
            <div class="highlight-box">
                <strong>Pythonæ“ä½œMongoDBï¼š</strong>ä½¿ç”¨pymongoåº“å¯ä»¥è½»æ¾åœ¨Pythonä¸­æ“ä½œMongoDBæ•°æ®åº“ã€‚
            </div>

            <h3>å®‰è£…MongoDBå’ŒPythonåº“</h3>
            <div class="code-box">
# å®‰è£…MongoDBï¼ˆæ¨èä½¿ç”¨Dockerï¼‰<br>
docker run -d -p 27017:27017 --name mongodb mongo:latest<br>
<br>
# å®‰è£…Python MongoDBåº“<br>
pip install pymongo<br>
            </div>

            <h3>Pythonè¿æ¥MongoDB</h3>
            <div class="code-box">
from pymongo import MongoClient<br>
from datetime import datetime<br>
import json<br>
<br>
# è¿æ¥MongoDB<br>
client = MongoClient('mongodb://localhost:27017/')<br>
db = client['myapp']  # é€‰æ‹©æ•°æ®åº“<br>
collection = db['users']  # é€‰æ‹©é›†åˆ<br>
<br>
# æµ‹è¯•è¿æ¥<br>
try:<br>
    client.admin.command('ping')<br>
    print("MongoDBè¿æ¥æˆåŠŸï¼")<br>
except Exception as e:<br>
    print(f"MongoDBè¿æ¥å¤±è´¥ï¼š{e}")<br>
            </div>

            <h3>åŸºæœ¬CRUDæ“ä½œ</h3>
            <div class="code-box">
# æ’å…¥å•ä¸ªæ–‡æ¡£<br>
user = {<br>
    'name': 'å¼ ä¸‰',<br>
    'age': 25,<br>
    'email': 'zhangsan@example.com',<br>
    'hobbies': ['è¯»ä¹¦', 'æ¸¸æ³³', 'ç¼–ç¨‹'],<br>
    'created_at': datetime.now()<br>
}<br>
result = collection.insert_one(user)<br>
print(f"æ’å…¥æˆåŠŸï¼ŒIDï¼š{result.inserted_id}")<br>
<br>
# æ’å…¥å¤šä¸ªæ–‡æ¡£<br>
users = [<br>
    {'name': 'æå››', 'age': 30, 'city': 'åŒ—äº¬'},<br>
    {'name': 'ç‹äº”', 'age': 28, 'city': 'ä¸Šæµ·'},<br>
    {'name': 'èµµå…­', 'age': 35, 'city': 'å¹¿å·'}<br>
]<br>
result = collection.insert_many(users)<br>
print(f"æ‰¹é‡æ’å…¥æˆåŠŸï¼Œæ•°é‡ï¼š{len(result.inserted_ids)}")<br>
<br>
# æŸ¥è¯¢æ–‡æ¡£<br>
# æŸ¥è¯¢å•ä¸ª<br>
user = collection.find_one({'name': 'å¼ ä¸‰'})<br>
print(f"æŸ¥è¯¢ç»“æœï¼š{user}")<br>
<br>
# æŸ¥è¯¢å¤šä¸ª<br>
users = collection.find({'age': {'$gte': 25}})  # å¹´é¾„>=25<br>
for user in users:<br>
    print(f"ç”¨æˆ·ï¼š{user['name']}, å¹´é¾„ï¼š{user['age']}")<br>
<br>
# æ›´æ–°æ–‡æ¡£<br>
result = collection.update_one(<br>
    {'name': 'å¼ ä¸‰'},<br>
    {'$set': {'age': 26, 'city': 'æ·±åœ³'}}<br>
)<br>
print(f"æ›´æ–°æˆåŠŸï¼Œå½±å“è¡Œæ•°ï¼š{result.modified_count}")<br>
<br>
# åˆ é™¤æ–‡æ¡£<br>
result = collection.delete_one({'name': 'å¼ ä¸‰'})<br>
print(f"åˆ é™¤æˆåŠŸï¼Œå½±å“è¡Œæ•°ï¼š{result.deleted_count}")<br>
            </div>

            <h3>é«˜çº§æŸ¥è¯¢ç¤ºä¾‹</h3>
            <div class="code-box">
# å¤æ‚æŸ¥è¯¢<br>
query = {<br>
    'age': {'$gte': 25, '$lte': 35},  # å¹´é¾„åœ¨25-35ä¹‹é—´<br>
    'city': {'$in': ['åŒ—äº¬', 'ä¸Šæµ·']}   # åŸå¸‚åœ¨åŒ—äº¬æˆ–ä¸Šæµ·<br>
}<br>
users = collection.find(query)<br>
<br>
# æ’åºå’Œé™åˆ¶<br>
users = collection.find().sort('age', -1).limit(5)  # æŒ‰å¹´é¾„é™åºï¼Œå–å‰5ä¸ª<br>
<br>
# æŠ•å½±ï¼ˆåªè¿”å›æŒ‡å®šå­—æ®µï¼‰<br>
users = collection.find({}, {'name': 1, 'age': 1, '_id': 0})<br>
<br>
# èšåˆæŸ¥è¯¢<br>
pipeline = [<br>
    {'$match': {'age': {'$gte': 25}}},  # ç­›é€‰<br>
    {'$group': {<br>
        '_id': '$city',<br>
        'count': {'$sum': 1},<br>
        'avg_age': {'$avg': '$age'}<br>
    }},  # åˆ†ç»„ç»Ÿè®¡<br>
    {'$sort': {'count': -1}}  # æ’åº<br>
]<br>
result = collection.aggregate(pipeline)<br>
for doc in result:<br>
    print(f"åŸå¸‚ï¼š{doc['_id']}, äººæ•°ï¼š{doc['count']}, å¹³å‡å¹´é¾„ï¼š{doc['avg_age']:.1f}")<br>
            </div>

            <h3>å®ç”¨åœºæ™¯ï¼šåšå®¢ç³»ç»Ÿ</h3>
            <div class="code-box">
class BlogManager:<br>
    def __init__(self):<br>
        self.client = MongoClient('mongodb://localhost:27017/')<br>
        self.db = self.client['blog']<br>
        self.posts = self.db['posts']<br>
        self.comments = self.db['comments']<br>
    <br>
    def create_post(self, title, content, author):<br>
        post = {<br>
            'title': title,<br>
            'content': content,<br>
            'author': author,<br>
            'created_at': datetime.now(),<br>
            'views': 0,<br>
            'likes': 0,<br>
            'tags': []<br>
        }<br>
        result = self.posts.insert_one(post)<br>
        return result.inserted_id<br>
    <br>
    def get_posts(self, page=1, per_page=10):<br>
        skip = (page - 1) * per_page<br>
        posts = self.posts.find().sort('created_at', -1).skip(skip).limit(per_page)<br>
        return list(posts)<br>
    <br>
    def add_comment(self, post_id, content, author):<br>
        comment = {<br>
            'post_id': post_id,<br>
            'content': content,<br>
            'author': author,<br>
            'created_at': datetime.now()<br>
        }<br>
        return self.comments.insert_one(comment).inserted_id<br>
    <br>
    def get_post_with_comments(self, post_id):<br>
        # ä½¿ç”¨èšåˆæŸ¥è¯¢å…³è”æ–‡ç« å’Œè¯„è®º<br>
        pipeline = [<br>
            {'$match': {'_id': post_id}},<br>
            {'$lookup': {<br>
                'from': 'comments',<br>
                'localField': '_id',<br>
                'foreignField': 'post_id',<br>
                'as': 'comments'<br>
            }}<br>
        ]<br>
        result = list(self.posts.aggregate(pipeline))<br>
        return result[0] if result else None<br>
<br>
# ä½¿ç”¨ç¤ºä¾‹<br>
blog = BlogManager()<br>
post_id = blog.create_post('NoSQLå­¦ä¹ å¿ƒå¾—', 'ä»Šå¤©å­¦ä¹ äº†MongoDB...', 'å¼ ä¸‰')<br>
blog.add_comment(post_id, 'å†™å¾—å¾ˆå¥½ï¼', 'æå››')<br>
post_with_comments = blog.get_post_with_comments(post_id)<br>
print(f"æ–‡ç« ï¼š{post_with_comments['title']}")<br>
print(f"è¯„è®ºæ•°ï¼š{len(post_with_comments['comments'])}")<br>
            </div>

            <div class="tip-box">
                <strong>ğŸ’¡ çµæ´»æ€§ä¼˜åŠ¿ï¼š</strong>MongoDBçš„æ–‡æ¡£ç»“æ„éå¸¸é€‚åˆå­˜å‚¨å¤æ‚çš„åµŒå¥—æ•°æ®ï¼Œæ¯”å¦‚ç”¨æˆ·èµ„æ–™ã€å•†å“ä¿¡æ¯ã€æ–‡ç« å†…å®¹ç­‰ã€‚
            </div>
        </div>

        <!-- æ€§èƒ½ä¼˜åŒ– -->
        <div id="performance" class="section">
            <h2>âš¡ NoSQLæ€§èƒ½ä¼˜åŒ–</h2>
            
            <div class="highlight-box">
                <strong>æ€§èƒ½ä¼˜åŒ–ï¼š</strong>åˆç†çš„é…ç½®å’Œä½¿ç”¨æ–¹å¼å¯ä»¥å¤§å¹…æå‡NoSQLæ•°æ®åº“çš„æ€§èƒ½ã€‚
            </div>

            <h3>Redisæ€§èƒ½ä¼˜åŒ–</h3>
            <div class="code-box">
# Redisé…ç½®ä¼˜åŒ–<br>
# redis.conf å…³é”®é…ç½®é¡¹<br>
<br>
# å†…å­˜ä¼˜åŒ–<br>
maxmemory 2gb<br>
maxmemory-policy allkeys-lru  # å†…å­˜æ»¡æ—¶åˆ é™¤æœ€å°‘ä½¿ç”¨çš„key<br>
<br>
# æŒä¹…åŒ–ä¼˜åŒ–<br>
save 900 1      # 900ç§’å†…è‡³å°‘1ä¸ªkeyå˜åŒ–æ—¶ä¿å­˜<br>
save 300 10     # 300ç§’å†…è‡³å°‘10ä¸ªkeyå˜åŒ–æ—¶ä¿å­˜<br>
save 60 10000   # 60ç§’å†…è‡³å°‘10000ä¸ªkeyå˜åŒ–æ—¶ä¿å­˜<br>
<br>
# ç½‘ç»œä¼˜åŒ–<br>
tcp-keepalive 300<br>
timeout 0<br>
<br>
# å®¢æˆ·ç«¯è¿æ¥ä¼˜åŒ–<br>
maxclients 10000<br>
            </div>

            <h3>Redisä½¿ç”¨æœ€ä½³å®è·µ</h3>
            <div class="code-box">
# 1. ä½¿ç”¨è¿æ¥æ± <br>
import redis<br>
from redis import ConnectionPool<br>
<br>
# åˆ›å»ºè¿æ¥æ± <br>
pool = ConnectionPool(host='localhost', port=6379, max_connections=20)<br>
r = redis.Redis(connection_pool=pool)<br>
<br>
# 2. æ‰¹é‡æ“ä½œ<br>
# ä½¿ç”¨pipelineå‡å°‘ç½‘ç»œå¾€è¿”<br>
pipe = r.pipeline()<br>
pipe.set('key1', 'value1')<br>
pipe.set('key2', 'value2')<br>
pipe.set('key3', 'value3')<br>
results = pipe.execute()<br>
<br>
# 3. åˆç†è®¾ç½®è¿‡æœŸæ—¶é—´<br>
r.setex('session:user123', 3600, 'session_data')  # 1å°æ—¶è¿‡æœŸ<br>
<br>
# 4. ä½¿ç”¨åˆé€‚çš„æ•°æ®ç»“æ„<br>
# å­˜å‚¨è®¡æ•°å™¨ç”¨å­—ç¬¦ä¸²<br>
r.incr('page_views')<br>
<br>
# å­˜å‚¨åˆ—è¡¨ç”¨list<br>
r.lpush('recent_posts', 'post1', 'post2')<br>
<br>
# å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ç”¨hash<br>
r.hset('user:123', mapping={'name': 'å¼ ä¸‰', 'age': 25})<br>
            </div>

            <h3>MongoDBæ€§èƒ½ä¼˜åŒ–</h3>
            <div class="code-box">
# MongoDBç´¢å¼•ä¼˜åŒ–<br>
from pymongo import MongoClient, ASCENDING, DESCENDING<br>
<br>
client = MongoClient('mongodb://localhost:27017/')<br>
db = client['myapp']<br>
collection = db['users']<br>
<br>
# åˆ›å»ºå•å­—æ®µç´¢å¼•<br>
collection.create_index('email')  # é‚®ç®±ç´¢å¼•<br>
collection.create_index('age')    # å¹´é¾„ç´¢å¼•<br>
<br>
# åˆ›å»ºå¤åˆç´¢å¼•<br>
collection.create_index([<br>
    ('city', ASCENDING),<br>
    ('age', DESCENDING)<br>
])<br>
<br>
# åˆ›å»ºæ–‡æœ¬ç´¢å¼•ï¼ˆç”¨äºå…¨æ–‡æœç´¢ï¼‰<br>
collection.create_index([('title', 'text'), ('content', 'text')])<br>
<br>
# æŸ¥çœ‹ç´¢å¼•<br>
for index in collection.list_indexes():<br>
    print(index)<br>
<br>
# æŸ¥è¯¢æ€§èƒ½åˆ†æ<br>
result = collection.find({'age': {'$gte': 25}}).explain()<br>
print(f"æŸ¥è¯¢æ‰§è¡Œæ—¶é—´ï¼š{result['executionStats']['executionTimeMillis']}ms")<br>
            </div>

            <h3>MongoDBæŸ¥è¯¢ä¼˜åŒ–</h3>
            <div class="code-box">
# 1. ä½¿ç”¨æŠ•å½±å‡å°‘æ•°æ®ä¼ è¾“<br>
users = collection.find(<br>
    {'age': {'$gte': 25}},<br>
    {'name': 1, 'email': 1, '_id': 0}  # åªè¿”å›nameå’Œemail<br>
)<br>
<br>
# 2. ä½¿ç”¨limité™åˆ¶ç»“æœæ•°é‡<br>
users = collection.find({'city': 'åŒ—äº¬'}).limit(10)<br>
<br>
# 3. ä½¿ç”¨èšåˆç®¡é“ä¼˜åŒ–å¤æ‚æŸ¥è¯¢<br>
pipeline = [<br>
    {'$match': {'age': {'$gte': 18}}},  # å…ˆè¿‡æ»¤<br>
    {'$group': {<br>
        '_id': '$city',<br>
        'count': {'$sum': 1}<br>
    }},<br>
    {'$sort': {'count': -1}},<br>
    {'$limit': 5}<br>
]<br>
result = collection.aggregate(pipeline)<br>
<br>
# 4. æ‰¹é‡æ“ä½œ<br>
from pymongo import InsertOne, UpdateOne, DeleteOne<br>
<br>
operations = [<br>
    InsertOne({'name': 'ç”¨æˆ·1', 'age': 25}),<br>
    UpdateOne({'name': 'å¼ ä¸‰'}, {'$set': {'age': 26}}),<br>
    DeleteOne({'name': 'æå››'})<br>
]<br>
result = collection.bulk_write(operations)<br>
            </div>

            <div class="tip-box">
                <strong>ğŸ’¡ æ€§èƒ½ç›‘æ§ï¼š</strong>å®šæœŸç›‘æ§æ•°æ®åº“æ€§èƒ½æŒ‡æ ‡ï¼Œå¦‚å“åº”æ—¶é—´ã€å†…å­˜ä½¿ç”¨ç‡ã€è¿æ¥æ•°ç­‰ï¼ŒåŠæ—¶å‘ç°å’Œè§£å†³æ€§èƒ½é—®é¢˜ã€‚
            </div>
        </div>

        <!-- å®‰å…¨é…ç½® -->
        <div id="security" class="section">
            <h2>ğŸ”’ NoSQLå®‰å…¨é…ç½®</h2>
            
            <div class="highlight-box">
                <strong>å®‰å…¨é‡è¦æ€§ï¼š</strong>NoSQLæ•°æ®åº“çš„å®‰å…¨é…ç½®å¯¹äºä¿æŠ¤æ•°æ®å’Œç³»ç»Ÿå®‰å…¨è‡³å…³é‡è¦ã€‚
            </div>

            <h3>Rediså®‰å…¨é…ç½®</h3>
            <div class="code-box">
# Rediså®‰å…¨é…ç½® (redis.conf)

# 1. è®¾ç½®å¯†ç 
requirepass your_strong_password_here

# 2. ç»‘å®šIPåœ°å€
bind 127.0.0.1 192.168.1.100  # åªå…è®¸æŒ‡å®šIPè®¿é—®

# 3. ä¿®æ”¹é»˜è®¤ç«¯å£
port 6380  # ä¸ä½¿ç”¨é»˜è®¤çš„6379ç«¯å£

# 4. ç¦ç”¨å±é™©å‘½ä»¤
rename-command FLUSHDB ""
rename-command FLUSHALL ""
rename-command KEYS ""
rename-command CONFIG "CONFIG_9a8b7c6d"

# 5. å¯ç”¨ä¿æŠ¤æ¨¡å¼
protected-mode yes
            </div>

            <h3>Redis Pythonå®‰å…¨è¿æ¥</h3>
            <div class="code-box">
import redis
import ssl

# ä½¿ç”¨å¯†ç è¿æ¥
r = redis.Redis(
    host='localhost',
    port=6380,
    password='your_strong_password_here',
    decode_responses=True
)

# SSL/TLSè¿æ¥ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰
r = redis.Redis(
    host='your-redis-server.com',
    port=6380,
    password='your_password',
    ssl=True,
    ssl_cert_reqs=ssl.CERT_REQUIRED,
    ssl_ca_certs='/path/to/ca.crt',
    ssl_certfile='/path/to/client.crt',
    ssl_keyfile='/path/to/client.key'
)

# è¿æ¥æ± å®‰å…¨é…ç½®
pool = redis.ConnectionPool(
    host='localhost',
    port=6380,
    password='your_password',
    max_connections=20,
    socket_timeout=5,
    socket_connect_timeout=5
)
r = redis.Redis(connection_pool=pool)
            </div>

            <h3>MongoDBå®‰å…¨é…ç½®</h3>
            <div class="code-box">
# MongoDBå®‰å…¨é…ç½®

# 1. å¯ç”¨è®¤è¯
# mongod.conf
security:
  authorization: enabled

# 2. åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·
use admin
db.createUser({
  user: "admin",
  pwd: "strong_password_here",
  roles: ["userAdminAnyDatabase", "dbAdminAnyDatabase", "readWriteAnyDatabase"]
})

# 3. åˆ›å»ºåº”ç”¨ç”¨æˆ·
use myapp
db.createUser({
  user: "appuser",
  pwd: "app_password_here",
  roles: ["readWrite"]
})

# 4. ç½‘ç»œå®‰å…¨é…ç½®
net:
  bindIp: 127.0.0.1,192.168.1.100  # ç»‘å®šç‰¹å®šIP
  port: 27018  # ä¿®æ”¹é»˜è®¤ç«¯å£
  ssl:
    mode: requireSSL
    PEMKeyFile: /path/to/mongodb.pem
            </div>

            <h3>MongoDB Pythonå®‰å…¨è¿æ¥</h3>
            <div class="code-box">
from pymongo import MongoClient
import ssl

# ä½¿ç”¨è®¤è¯è¿æ¥
client = MongoClient(
    'mongodb://appuser:app_password_here@localhost:27018/myapp'
)

# æˆ–è€…åˆ†åˆ«æŒ‡å®šå‚æ•°
client = MongoClient(
    host='localhost',
    port=27018,
    username='appuser',
    password='app_password_here',
    authSource='myapp'
)

# SSL/TLSè¿æ¥
client = MongoClient(
    'mongodb://appuser:password@your-mongo-server.com:27018/myapp',
    ssl=True,
    ssl_cert_reqs=ssl.CERT_REQUIRED,
    ssl_ca_certs='/path/to/ca.pem',
    ssl_certfile='/path/to/client.pem'
)

# è¿æ¥æ± å’Œè¶…æ—¶é…ç½®
client = MongoClient(
    'mongodb://appuser:password@localhost:27018/myapp',
    maxPoolSize=50,
    serverSelectionTimeoutMS=5000,
    socketTimeoutMS=5000
)
            </div>

            <h3>é€šç”¨å®‰å…¨æœ€ä½³å®è·µ</h3>
            <div class="code-box">
# 1. è¾“å…¥éªŒè¯å’Œæ¸…ç†
def validate_user_input(user_input):
    # éªŒè¯è¾“å…¥é•¿åº¦
    if len(user_input) > 100:
        raise ValueError("è¾“å…¥è¿‡é•¿")
    
    # è¿‡æ»¤ç‰¹æ®Šå­—ç¬¦
    import re
    if re.search(r'[<>"\';]', user_input):
        raise ValueError("åŒ…å«éæ³•å­—ç¬¦")
    
    return user_input.strip()

# 2. ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯
import os

REDIS_PASSWORD = os.getenv('REDIS_PASSWORD')
MONGO_URI = os.getenv('MONGO_URI')

# 3. æ—¥å¿—è®°å½•ï¼ˆä¸è®°å½•æ•æ„Ÿä¿¡æ¯ï¼‰
import logging

logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

def log_database_operation(operation, collection, success):
    logger.info(f"æ•°æ®åº“æ“ä½œ: {operation}, é›†åˆ: {collection}, æˆåŠŸ: {success}")
    # æ³¨æ„ï¼šä¸è¦è®°å½•å¯†ç ã€ç”¨æˆ·æ•°æ®ç­‰æ•æ„Ÿä¿¡æ¯

# 4. å®šæœŸå¤‡ä»½
import subprocess
from datetime import datetime

def backup_mongodb():
    timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
    backup_file = f"backup_mongodb_{timestamp}.gz"
    
    cmd = [
        'mongodump',
        '--host', 'localhost:27018',
        '--username', 'backup_user',
        '--password', os.getenv('MONGO_BACKUP_PASSWORD'),
        '--authenticationDatabase', 'admin',
        '--gzip',
        '--archive', backup_file
    ]
    
    result = subprocess.run(cmd, capture_output=True, text=True)
    if result.returncode == 0:
        logger.info(f"MongoDBå¤‡ä»½æˆåŠŸ: {backup_file}")
    else:
        logger.error(f"MongoDBå¤‡ä»½å¤±è´¥: {result.stderr}")
            </div>

            <div class="tip-box">
                <strong>ğŸ” å®‰å…¨æé†’ï¼š</strong>æ°¸è¿œä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç å¯†ç ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶ï¼Œå¹¶å®šæœŸæ›´æ–°å¯†ç å’Œè¯ä¹¦ã€‚
            </div>
        </div>

        <!-- ä½•æ—¶ä½¿ç”¨ -->
        <div id="when-to-use" class="section">
            <h2>ğŸ¯ ä»€ä¹ˆæ—¶å€™ä½¿ç”¨NoSQLï¼Ÿ</h2>
            
            <h3>âœ… é€‚åˆä½¿ç”¨NoSQLçš„åœºæ™¯</h3>
            <ul style="margin-left: 20px;">
                <li>ğŸš€ <strong>éœ€è¦é«˜æ€§èƒ½ï¼š</strong>ç½‘ç«™è®¿é—®é‡å¤§ï¼Œéœ€è¦å¿«é€Ÿå“åº”</li>
                <li>ğŸ“Š <strong>å¤§æ•°æ®å¤„ç†ï¼š</strong>æ•°æ®é‡ç‰¹åˆ«å¤§ï¼Œä¼ ç»Ÿæ•°æ®åº“å¤„ç†ä¸è¿‡æ¥</li>
                <li>ğŸ”„ <strong>æ•°æ®ç»“æ„çµæ´»ï¼š</strong>æ•°æ®æ ¼å¼ç»å¸¸å˜åŒ–ï¼Œä¸å›ºå®š</li>
                <li>âš¡ <strong>å¿«é€Ÿå¼€å‘ï¼š</strong>é¡¹ç›®éœ€è¦å¿«é€Ÿä¸Šçº¿ï¼Œä¸æƒ³èŠ±å¤ªå¤šæ—¶é—´è®¾è®¡æ•°æ®åº“ç»“æ„</li>
            </ul>

            <h3>âŒ ä¸é€‚åˆä½¿ç”¨NoSQLçš„åœºæ™¯</h3>
            <ul style="margin-left: 20px;">
                <li>ğŸ’° <strong>é‡‘èç³»ç»Ÿï¼š</strong>éœ€è¦ä¸¥æ ¼çš„äº‹åŠ¡å¤„ç†ï¼Œä¸èƒ½å‡ºé”™</li>
                <li>ğŸ“‹ <strong>å¤æ‚å…³ç³»ï¼š</strong>æ•°æ®ä¹‹é—´å…³ç³»å¤æ‚ï¼Œéœ€è¦å¤æ‚çš„æŸ¥è¯¢</li>
                <li>ğŸ‘¥ <strong>å°å›¢é˜Ÿé¡¹ç›®ï¼š</strong>å›¢é˜Ÿå¯¹NoSQLä¸ç†Ÿæ‚‰ï¼Œå­¦ä¹ æˆæœ¬é«˜</li>
            </ul>

            <div class="highlight-box">
                <strong>ğŸ¯ é€‰æ‹©å»ºè®®ï¼š</strong>
                <br>â€¢ æ–°æ‰‹å»ºè®®å…ˆä»Rediså¼€å§‹å­¦ï¼Œæ¯”è¾ƒç®€å•
                <br>â€¢ æƒ³åšç½‘ç«™å¯ä»¥å­¦MongoDBï¼Œå¾ˆå®ç”¨
                <br>â€¢ ä¸è¦ç›²ç›®è¿½æ±‚æ–°æŠ€æœ¯ï¼Œæ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©
            </div>

            <h3>ğŸš€ ä¸‹ä¸€æ­¥å­¦ä¹ å»ºè®®</h3>
            <ol style="margin-left: 20px;">
                <li>å…ˆå®‰è£…Redisï¼Œç»ƒä¹ åŸºæœ¬å‘½ä»¤</li>
                <li>å­¦ä¹ Pythonæ“ä½œRedisçš„åº“ï¼ˆredis-pyï¼‰</li>
                <li>å®‰è£…MongoDBï¼Œç†Ÿæ‚‰åŸºæœ¬æ“ä½œ</li>
                <li>å­¦ä¹ Pythonæ“ä½œMongoDBçš„åº“ï¼ˆpymongoï¼‰</li>
                <li>åšä¸€ä¸ªå°é¡¹ç›®ï¼Œæ¯”å¦‚ç®€å•çš„åšå®¢ç³»ç»Ÿ</li>
            </ol>

            <div class="tip-box">
                <strong>ğŸ’¡ å­¦ä¹ å°è´´å£«ï¼š</strong>ä¸è¦æ€¥äºæ±‚æˆï¼Œå…ˆæŠŠåŸºç¡€æ‰“ç‰¢ã€‚å¤šåŠ¨æ‰‹ç»ƒä¹ ï¼Œç†è®ºç»“åˆå®è·µæ‰èƒ½çœŸæ­£æŒæ¡ï¼
            </div>
        </div>

        <!-- å®æˆ˜ç»ƒä¹  -->
        <div id="practice" class="section">
            <h2>ğŸš€ å®æˆ˜ç»ƒä¹ é¡¹ç›®</h2>
            
            <div class="highlight-box">
                <strong>åŠ¨æ‰‹å®è·µï¼š</strong>é€šè¿‡å®é™…é¡¹ç›®æ¥å·©å›ºNoSQLæ•°æ®åº“çš„å­¦ä¹ æˆæœã€‚
            </div>

            <h3>é¡¹ç›®1ï¼šç”¨æˆ·ä¼šè¯ç®¡ç†ç³»ç»Ÿï¼ˆRedisï¼‰</h3>
            <div class="code-box">
# ç”¨æˆ·ä¼šè¯ç®¡ç†ç³»ç»Ÿ
import redis
import json
import uuid
from datetime import datetime, timedelta

class SessionManager:
    def __init__(self):
        self.redis_client = redis.Redis(
            host='localhost', 
            port=6379, 
            db=0, 
            decode_responses=True
        )
        self.session_timeout = 3600  # 1å°æ—¶
    
    def create_session(self, user_id, user_data):
        """åˆ›å»ºç”¨æˆ·ä¼šè¯"""
        session_id = str(uuid.uuid4())
        session_data = {
            'user_id': user_id,
            'user_data': user_data,
            'created_at': datetime.now().isoformat(),
            'last_access': datetime.now().isoformat()
        }
        
        # å­˜å‚¨ä¼šè¯æ•°æ®ï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´
        self.redis_client.setex(
            f"session:{session_id}",
            self.session_timeout,
            json.dumps(session_data, ensure_ascii=False)
        )
        
        # ç»´æŠ¤ç”¨æˆ·çš„æ´»è·ƒä¼šè¯åˆ—è¡¨
        self.redis_client.sadd(f"user_sessions:{user_id}", session_id)
        
        return session_id
    
    def get_session(self, session_id):
        """è·å–ä¼šè¯ä¿¡æ¯"""
        session_data = self.redis_client.get(f"session:{session_id}")
        if session_data:
            data = json.loads(session_data)
            # æ›´æ–°æœ€åè®¿é—®æ—¶é—´
            data['last_access'] = datetime.now().isoformat()
            self.redis_client.setex(
                f"session:{session_id}",
                self.session_timeout,
                json.dumps(data, ensure_ascii=False)
            )
            return data
        return None
    
    def delete_session(self, session_id):
        """åˆ é™¤ä¼šè¯"""
        session_data = self.get_session(session_id)
        if session_data:
            user_id = session_data['user_id']
            self.redis_client.delete(f"session:{session_id}")
            self.redis_client.srem(f"user_sessions:{user_id}", session_id)
            return True
        return False
    
    def get_user_sessions(self, user_id):
        """è·å–ç”¨æˆ·çš„æ‰€æœ‰æ´»è·ƒä¼šè¯"""
        session_ids = self.redis_client.smembers(f"user_sessions:{user_id}")
        sessions = []
        for session_id in session_ids:
            session_data = self.get_session(session_id)
            if session_data:
                sessions.append({
                    'session_id': session_id,
                    'data': session_data
                })
        return sessions

# ä½¿ç”¨ç¤ºä¾‹
session_mgr = SessionManager()

# åˆ›å»ºä¼šè¯
user_data = {'name': 'å¼ ä¸‰', 'role': 'user', 'email': 'zhangsan@example.com'}
session_id = session_mgr.create_session('user123', user_data)
print(f"ä¼šè¯åˆ›å»ºæˆåŠŸï¼š{session_id}")

# è·å–ä¼šè¯
session = session_mgr.get_session(session_id)
print(f"ä¼šè¯ä¿¡æ¯ï¼š{session}")

# è·å–ç”¨æˆ·æ‰€æœ‰ä¼šè¯
user_sessions = session_mgr.get_user_sessions('user123')
print(f"ç”¨æˆ·ä¼šè¯æ•°ï¼š{len(user_sessions)}")
            </div>

            <h3>é¡¹ç›®2ï¼šåšå®¢å†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆMongoDBï¼‰</h3>
            <div class="code-box">
# åšå®¢å†…å®¹ç®¡ç†ç³»ç»Ÿ
from pymongo import MongoClient
from datetime import datetime
from bson import ObjectId
import re

class BlogCMS:
    def __init__(self):
        self.client = MongoClient('mongodb://localhost:27017/')
        self.db = self.client['blog_cms']
        self.posts = self.db['posts']
        self.categories = self.db['categories']
        self.tags = self.db['tags']
        self.comments = self.db['comments']
        
        # åˆ›å»ºç´¢å¼•
        self.posts.create_index('title')
        self.posts.create_index('author')
        self.posts.create_index('created_at')
        self.posts.create_index([('title', 'text'), ('content', 'text')])
    
    def create_category(self, name, description):
        """åˆ›å»ºåˆ†ç±»"""
        category = {
            'name': name,
            'description': description,
            'created_at': datetime.now(),
            'post_count': 0
        }
        return self.categories.insert_one(category).inserted_id
    
    def create_post(self, title, content, author, category_id, tags=None):
        """åˆ›å»ºæ–‡ç« """
        post = {
            'title': title,
            'content': content,
            'author': author,
            'category_id': ObjectId(category_id),
            'tags': tags or [],
            'created_at': datetime.now(),
            'updated_at': datetime.now(),
            'views': 0,
            'likes': 0,
            'status': 'published'
        }
        
        post_id = self.posts.insert_one(post).inserted_id
        
        # æ›´æ–°åˆ†ç±»æ–‡ç« æ•°
        self.categories.update_one(
            {'_id': ObjectId(category_id)},
            {'$inc': {'post_count': 1}}
        )
        
        # æ›´æ–°æ ‡ç­¾
        if tags:
            for tag in tags:
                self.tags.update_one(
                    {'name': tag},
                    {
                        '$inc': {'post_count': 1},
                        '$setOnInsert': {'created_at': datetime.now()}
                    },
                    upsert=True
                )
        
        return post_id
    
    def get_posts(self, page=1, per_page=10, category_id=None, tag=None):
        """è·å–æ–‡ç« åˆ—è¡¨"""
        query = {'status': 'published'}
        
        if category_id:
            query['category_id'] = ObjectId(category_id)
        
        if tag:
            query['tags'] = tag
        
        skip = (page - 1) * per_page
        
        posts = self.posts.find(query).sort('created_at', -1).skip(skip).limit(per_page)
        
        # å…³è”åˆ†ç±»ä¿¡æ¯
        result = []
        for post in posts:
            category = self.categories.find_one({'_id': post['category_id']})
            post['category'] = category['name'] if category else 'æœªåˆ†ç±»'
            result.append(post)
        
        return result
    
    def search_posts(self, keyword):
        """æœç´¢æ–‡ç« """
        # ä½¿ç”¨æ–‡æœ¬ç´¢å¼•æœç´¢
        posts = self.posts.find(
            {'$text': {'$search': keyword}},
            {'score': {'$meta': 'textScore'}}
        ).sort([('score', {'$meta': 'textScore'})])
        
        return list(posts)
    
    def add_comment(self, post_id, author, content, parent_id=None):
        """æ·»åŠ è¯„è®º"""
        comment = {
            'post_id': ObjectId(post_id),
            'author': author,
            'content': content,
            'parent_id': ObjectId(parent_id) if parent_id else None,
            'created_at': datetime.now(),
            'likes': 0
        }
        return self.comments.insert_one(comment).inserted_id
    
    def get_post_with_comments(self, post_id):
        """è·å–æ–‡ç« åŠå…¶è¯„è®º"""
        # ä½¿ç”¨èšåˆæŸ¥è¯¢
        pipeline = [
            {'$match': {'_id': ObjectId(post_id)}},
            {'$lookup': {
                'from': 'comments',
                'localField': '_id',
                'foreignField': 'post_id',
                'as': 'comments'
            }},
            {'$lookup': {
                'from': 'categories',
                'localField': 'category_id',
                'foreignField': '_id',
                'as': 'category'
            }}
        ]
        
        result = list(self.posts.aggregate(pipeline))
        if result:
            post = result[0]
            post['category'] = post['category'][0] if post['category'] else None
            return post
        return None
    
    def get_statistics(self):
        """è·å–ç»Ÿè®¡ä¿¡æ¯"""
        stats = {
            'total_posts': self.posts.count_documents({'status': 'published'}),
            'total_categories': self.categories.count_documents({}),
            'total_tags': self.tags.count_documents({}),
            'total_comments': self.comments.count_documents({})
        }
        
        # æœ€å—æ¬¢è¿çš„æ–‡ç« 
        popular_posts = list(self.posts.find(
            {'status': 'published'}
        ).sort('views', -1).limit(5))
        
        stats['popular_posts'] = popular_posts
        return stats

# ä½¿ç”¨ç¤ºä¾‹
blog = BlogCMS()

# åˆ›å»ºåˆ†ç±»
tech_category = blog.create_category('æŠ€æœ¯', 'æŠ€æœ¯ç›¸å…³æ–‡ç« ')
life_category = blog.create_category('ç”Ÿæ´»', 'ç”Ÿæ´»æ„Ÿæ‚Ÿæ–‡ç« ')

# åˆ›å»ºæ–‡ç« 
post_id = blog.create_post(
    title='NoSQLæ•°æ®åº“å­¦ä¹ å¿ƒå¾—',
    content='ä»Šå¤©å­¦ä¹ äº†Rediså’ŒMongoDBï¼Œæ”¶è·å¾ˆå¤§...',
    author='å¼ ä¸‰',
    category_id=str(tech_category),
    tags=['NoSQL', 'Redis', 'MongoDB', 'æ•°æ®åº“']
)

# æ·»åŠ è¯„è®º
comment_id = blog.add_comment(
    post_id=str(post_id),
    author='æå››',
    content='å†™å¾—å¾ˆå¥½ï¼Œå­¦åˆ°äº†å¾ˆå¤šï¼'
)

# è·å–æ–‡ç« å’Œè¯„è®º
post_with_comments = blog.get_post_with_comments(str(post_id))
print(f"æ–‡ç« æ ‡é¢˜ï¼š{post_with_comments['title']}")
print(f"è¯„è®ºæ•°ï¼š{len(post_with_comments['comments'])}")

# æœç´¢æ–‡ç« 
search_results = blog.search_posts('NoSQL')
print(f"æœç´¢ç»“æœï¼š{len(search_results)}ç¯‡æ–‡ç« ")

# è·å–ç»Ÿè®¡ä¿¡æ¯
stats = blog.get_statistics()
print(f"åšå®¢ç»Ÿè®¡ï¼š{stats}")
            </div>

            <h3>é¡¹ç›®3ï¼šå®æ—¶èŠå¤©ç³»ç»Ÿï¼ˆRedis + MongoDBï¼‰</h3>
            <div class="code-box">
# å®æ—¶èŠå¤©ç³»ç»Ÿï¼ˆç»“åˆRediså’ŒMongoDBï¼‰
import redis
from pymongo import MongoClient
from datetime import datetime
import json

class ChatSystem:
    def __init__(self):
        # Redisç”¨äºå®æ—¶æ¶ˆæ¯å’Œåœ¨çº¿ç”¨æˆ·
        self.redis_client = redis.Redis(
            host='localhost', 
            port=6379, 
            db=0, 
            decode_responses=True
        )
        
        # MongoDBç”¨äºæ¶ˆæ¯æŒä¹…åŒ–
        self.mongo_client = MongoClient('mongodb://localhost:27017/')
        self.db = self.mongo_client['chat_system']
        self.messages = self.db['messages']
        self.rooms = self.db['rooms']
        self.users = self.db['users']
        
        # åˆ›å»ºç´¢å¼•
        self.messages.create_index([('room_id', 1), ('created_at', -1)])
        self.messages.create_index('sender_id')
    
    def create_room(self, name, description, creator_id):
        """åˆ›å»ºèŠå¤©å®¤"""
        room = {
            'name': name,
            'description': description,
            'creator_id': creator_id,
            'created_at': datetime.now(),
            'member_count': 1,
            'last_message_at': datetime.now()
        }
        room_id = self.rooms.insert_one(room).inserted_id
        
        # å°†åˆ›å»ºè€…åŠ å…¥æˆ¿é—´
        self.join_room(str(room_id), creator_id)
        
        return room_id
    
    def join_room(self, room_id, user_id):
        """ç”¨æˆ·åŠ å…¥èŠå¤©å®¤"""
        # æ·»åŠ åˆ°Redisåœ¨çº¿ç”¨æˆ·åˆ—è¡¨
        self.redis_client.sadd(f"room:{room_id}:users", user_id)
        
        # æ›´æ–°MongoDBæˆ¿é—´æˆå‘˜æ•°
        self.rooms.update_one(
            {'_id': ObjectId(room_id)},
            {'$inc': {'member_count': 1}}
        )
        
        # å‘é€ç³»ç»Ÿæ¶ˆæ¯
        self.send_system_message(room_id, f"ç”¨æˆ· {user_id} åŠ å…¥äº†èŠå¤©å®¤")
    
    def leave_room(self, room_id, user_id):
        """ç”¨æˆ·ç¦»å¼€èŠå¤©å®¤"""
        # ä»Redisåœ¨çº¿ç”¨æˆ·åˆ—è¡¨ç§»é™¤
        self.redis_client.srem(f"room:{room_id}:users", user_id)
        
        # æ›´æ–°MongoDBæˆ¿é—´æˆå‘˜æ•°
        self.rooms.update_one(
            {'_id': ObjectId(room_id)},
            {'$inc': {'member_count': -1}}
        )
        
        # å‘é€ç³»ç»Ÿæ¶ˆæ¯
        self.send_system_message(room_id, f"ç”¨æˆ· {user_id} ç¦»å¼€äº†èŠå¤©å®¤")
    
    def send_message(self, room_id, sender_id, content, message_type='text'):
        """å‘é€æ¶ˆæ¯"""
        message = {
            'room_id': room_id,
            'sender_id': sender_id,
            'content': content,
            'message_type': message_type,
            'created_at': datetime.now()
        }
        
        # ä¿å­˜åˆ°MongoDB
        message_id = self.messages.insert_one(message).inserted_id
        message['_id'] = str(message_id)
        
        # å‘å¸ƒåˆ°Redisé¢‘é“ï¼ˆå®æ—¶æ¨é€ï¼‰
        self.redis_client.publish(
            f"room:{room_id}",
            json.dumps(message, default=str, ensure_ascii=False)
        )
        
        # æ›´æ–°æˆ¿é—´æœ€åæ¶ˆæ¯æ—¶é—´
        self.rooms.update_one(
            {'_id': ObjectId(room_id)},
            {'$set': {'last_message_at': datetime.now()}}
        )
        
        return message_id
    
    def send_system_message(self, room_id, content):
        """å‘é€ç³»ç»Ÿæ¶ˆæ¯"""
        return self.send_message(room_id, 'system', content, 'system')
    
    def get_room_messages(self, room_id, page=1, per_page=50):
        """è·å–èŠå¤©å®¤å†å²æ¶ˆæ¯"""
        skip = (page - 1) * per_page
        
        messages = self.messages.find(
            {'room_id': room_id}
        ).sort('created_at', -1).skip(skip).limit(per_page)
        
        return list(reversed(list(messages)))
    
    def get_online_users(self, room_id):
        """è·å–èŠå¤©å®¤åœ¨çº¿ç”¨æˆ·"""
        return list(self.redis_client.smembers(f"room:{room_id}:users"))
    
    def get_user_rooms(self, user_id):
        """è·å–ç”¨æˆ·å‚ä¸çš„èŠå¤©å®¤"""
        # ä»Redisè·å–ç”¨æˆ·å½“å‰åœ¨çº¿çš„æˆ¿é—´
        room_keys = self.redis_client.keys("room:*:users")
        user_rooms = []
        
        for key in room_keys:
            if self.redis_client.sismember(key, user_id):
                room_id = key.split(':')[1]
                room = self.rooms.find_one({'_id': ObjectId(room_id)})
                if room:
                    room['online_users'] = len(self.get_online_users(room_id))
                    user_rooms.append(room)
        
        return user_rooms
    
    def subscribe_room(self, room_id):
        """è®¢é˜…èŠå¤©å®¤æ¶ˆæ¯ï¼ˆç”¨äºå®æ—¶æ¨é€ï¼‰"""
        pubsub = self.redis_client.pubsub()
        pubsub.subscribe(f"room:{room_id}")
        return pubsub

# ä½¿ç”¨ç¤ºä¾‹
chat = ChatSystem()

# åˆ›å»ºèŠå¤©å®¤
room_id = chat.create_room('æŠ€æœ¯è®¨è®º', 'NoSQLæ•°æ®åº“æŠ€æœ¯äº¤æµ', 'user123')
print(f"èŠå¤©å®¤åˆ›å»ºæˆåŠŸï¼š{room_id}")

# ç”¨æˆ·åŠ å…¥èŠå¤©å®¤
chat.join_room(str(room_id), 'user456')
chat.join_room(str(room_id), 'user789')

# å‘é€æ¶ˆæ¯
message_id = chat.send_message(
    str(room_id), 
    'user123', 
    'å¤§å®¶å¥½ï¼Œæ¬¢è¿æ¥åˆ°æŠ€æœ¯è®¨è®ºå®¤ï¼'
)

chat.send_message(
    str(room_id), 
    'user456', 
    'è°¢è°¢ï¼æˆ‘æƒ³äº†è§£ä¸€ä¸‹Redisçš„ä½¿ç”¨åœºæ™¯'
)

# è·å–èŠå¤©è®°å½•
messages = chat.get_room_messages(str(room_id))
print(f"èŠå¤©è®°å½•ï¼š{len(messages)}æ¡æ¶ˆæ¯")

# è·å–åœ¨çº¿ç”¨æˆ·
online_users = chat.get_online_users(str(room_id))
print(f"åœ¨çº¿ç”¨æˆ·ï¼š{online_users}")

# è·å–ç”¨æˆ·å‚ä¸çš„èŠå¤©å®¤
user_rooms = chat.get_user_rooms('user123')
print(f"ç”¨æˆ·èŠå¤©å®¤ï¼š{len(user_rooms)}ä¸ª")
            </div>

            <h3>ç»ƒä¹ ä»»åŠ¡</h3>
            <div class="highlight-box">
                <strong>ğŸ¯ æŒ‘æˆ˜ä»»åŠ¡ï¼š</strong>
                <br>1. å®Œå–„ä¼šè¯ç®¡ç†ç³»ç»Ÿï¼Œæ·»åŠ ä¼šè¯ç»Ÿè®¡åŠŸèƒ½
                <br>2. ä¸ºåšå®¢ç³»ç»Ÿæ·»åŠ æ–‡ç« ç‚¹èµå’Œæ”¶è—åŠŸèƒ½
                <br>3. å®ç°èŠå¤©ç³»ç»Ÿçš„æ¶ˆæ¯æ’¤å›å’Œç¼–è¾‘åŠŸèƒ½
                <br>4. æ·»åŠ æ•°æ®å¤‡ä»½å’Œæ¢å¤åŠŸèƒ½
                <br>5. å®ç°ç®€å•çš„æ•°æ®åˆ†æå’ŒæŠ¥è¡¨åŠŸèƒ½
            </div>

            <div class="tip-box">
                <strong>ğŸ’¡ é¡¹ç›®æç¤ºï¼š</strong>è¿™äº›é¡¹ç›®æ¶µç›–äº†NoSQLæ•°æ®åº“çš„ä¸»è¦åº”ç”¨åœºæ™¯ï¼Œé€šè¿‡å®é™…ç¼–ç å¯ä»¥æ›´å¥½åœ°ç†è§£Rediså’ŒMongoDBçš„ç‰¹ç‚¹å’Œç”¨æ³•ã€‚å»ºè®®å…ˆä»ç®€å•åŠŸèƒ½å¼€å§‹ï¼Œé€æ­¥å®Œå–„ã€‚
            </div>
        </div>

        <!-- é¡µè„š -->
        <div style="text-align: center; padding: 20px; color: #666; border-top: 1px solid #ddd; margin-top: 30px;">
            <p>ğŸ“ NoSQLæ•°æ®åº“æ–°æ‰‹å…¥é—¨æ•™ç¨‹ | ç®€å•æ˜“æ‡‚ï¼Œå¿«é€Ÿä¸Šæ‰‹</p>
            <p style="font-size: 0.9em; margin-top: 5px;">è®°ä½ï¼šå­¦ä¹ ç¼–ç¨‹æœ€é‡è¦çš„æ˜¯å¤šç»ƒä¹ ï¼Œä¸è¦åªçœ‹ä¸åšï¼</p>
        </div>
    </div>

    <!-- ç®€å•çš„JavaScriptäº¤äº’ -->
    <script>
        // å¹³æ»‘æ»šåŠ¨åˆ°æŒ‡å®šä½ç½®
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // ç®€å•çš„ä»£ç å¤åˆ¶åŠŸèƒ½
        document.querySelectorAll('.code-box').forEach(codeBox => {
            codeBox.addEventListener('click', function() {
                const text = this.textContent;
                navigator.clipboard.writeText(text).then(() => {
                    // ç®€å•çš„æç¤º
                    const originalBg = this.style.backgroundColor;
                    this.style.backgroundColor = '#4a5568';
                    setTimeout(() => {
                        this.style.backgroundColor = originalBg;
                    }, 200);
                });
            });
        });

        // è¿›åº¦æ¡åŠŸèƒ½
        function updateProgressBar() {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;
            const progress = (scrollTop / scrollHeight) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        window.addEventListener('scroll', updateProgressBar);

        // æœç´¢åŠŸèƒ½
        let searchIndex = [];

        function buildSearchIndex() {
            const sections = document.querySelectorAll('.section');
            searchIndex = [];
            
            sections.forEach((section, index) => {
                const title = section.querySelector('h2');
                const content = section.textContent.toLowerCase();
                const id = section.id || `section-${index}`;
                
                if (!section.id) {
                    section.id = id;
                }
                
                searchIndex.push({
                    id: id,
                    title: title ? title.textContent : `ç« èŠ‚ ${index + 1}`,
                    content: content,
                    element: section
                });
            });
        }

        function performSearch() {
            const query = document.getElementById('searchInput').value.toLowerCase().trim();
            const resultsContainer = document.getElementById('searchResults');
            
            if (query.length < 2) {
                resultsContainer.style.display = 'none';
                return;
            }
            
            const results = searchIndex.filter(item => 
                item.content.includes(query) || item.title.toLowerCase().includes(query)
            );
            
            if (results.length === 0) {
                resultsContainer.innerHTML = '<div class="search-result-item">æœªæ‰¾åˆ°ç›¸å…³å†…å®¹</div>';
            } else {
                resultsContainer.innerHTML = results.map(result => {
                    const snippet = getSnippet(result.content, query);
                    return `<div class="search-result-item" onclick="scrollToElement('${result.id}')">
                        <strong>${result.title}</strong><br>
                        <small>${snippet}</small>
                    </div>`;
                }).join('');
            }
            
            resultsContainer.style.display = 'block';
        }

        function getSnippet(content, query) {
            const index = content.indexOf(query);
            const start = Math.max(0, index - 50);
            const end = Math.min(content.length, index + query.length + 50);
            let snippet = content.substring(start, end);
            
            if (start > 0) snippet = '...' + snippet;
            if (end < content.length) snippet = snippet + '...';
            
            return snippet.replace(new RegExp(query, 'gi'), `<span class="search-highlight">${query}</span>`);
        }

        function scrollToElement(elementId) {
            const element = document.getElementById(elementId);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth', block: 'start' });
                element.style.backgroundColor = '#fff3cd';
                setTimeout(() => {
                    element.style.backgroundColor = '';
                }, 2000);
            }
            document.getElementById('searchResults').style.display = 'none';
        }

        function clearSearch() {
            document.getElementById('searchInput').value = '';
            document.getElementById('searchResults').style.display = 'none';
        }

        // æœç´¢è¾“å…¥äº‹ä»¶
        document.getElementById('searchInput').addEventListener('input', performSearch);
        
        // æŒ‰Enteré”®æœç´¢
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });

        // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹éšè—æœç´¢ç»“æœ
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.search-container')) {
                document.getElementById('searchResults').style.display = 'none';
            }
        });

        // è¿”å›é¡¶éƒ¨æŒ‰é’®
        const backToTopBtn = document.createElement('button');
        backToTopBtn.innerHTML = 'â†‘';
        backToTopBtn.className = 'back-to-top';
        backToTopBtn.onclick = function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        };
        document.body.appendChild(backToTopBtn);

        // æ˜¾ç¤º/éšè—è¿”å›é¡¶éƒ¨æŒ‰é’®
        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 300) {
                backToTopBtn.classList.add('show');
            } else {
                backToTopBtn.classList.remove('show');
            }
        });

        // é¡µé¢åŠ è½½å®Œæˆåæ„å»ºæœç´¢ç´¢å¼•
        window.addEventListener('load', function() {
            buildSearchIndex();
            updateProgressBar();
        });
    </script>
</body>
</html>