<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MySQL数据库入门教程</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            padding: 40px 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        nav {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .nav-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .nav-item {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .nav-item:hover {
            background: #e3f2fd;
            border-color: #2196f3;
            transform: translateY(-2px);
        }
        
        .nav-item.active {
            background: #2196f3;
            color: white;
        }
        
        .content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        h2 {
            color: #2196f3;
            font-size: 2em;
            margin-bottom: 20px;
            border-bottom: 3px solid #2196f3;
            padding-bottom: 10px;
        }
        
        h3 {
            color: #333;
            font-size: 1.5em;
            margin: 25px 0 15px 0;
        }
        
        .highlight {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #2196f3;
            margin: 20px 0;
        }
        
        .code {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            border: 1px solid #ddd;
            overflow-x: auto;
        }
        
        .example {
            background: #f0f8ff;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #b3d9ff;
        }
        
        .tip {
            background: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
            margin: 15px 0;
        }
        
        .warning {
            background: #f8d7da;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #dc3545;
            margin: 15px 0;
        }
        
        ul, ol {
            margin: 15px 0;
            padding-left: 30px;
        }
        
        li {
            margin: 8px 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        th {
            background: #f8f9fa;
            font-weight: bold;
        }
        
        .btn {
            background: #2196f3;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        
        .btn:hover {
            background: #1976d2;
        }
        
        /* 返回顶部按钮样式 */
        #backToTop {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: #2196f3;
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
            transition: all 0.3s ease;
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px);
            z-index: 1000;
        }
        
        #backToTop.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        #backToTop:hover {
            background: #1976d2;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(33, 150, 243, 0.4);
        }
        
        #backToTop:active {
            transform: translateY(0);
        }
        
        /* 搜索功能样式 */
        .search-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        #searchInput {
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 20px;
            font-size: 14px;
            width: 200px;
            transition: all 0.3s ease;
            background: white;
        }
        
        #searchInput:focus {
            outline: none;
            border-color: #2196f3;
            box-shadow: 0 0 10px rgba(33, 150, 243, 0.3);
            width: 250px;
        }
        
        .search-btn {
            padding: 8px 12px;
            background: #2196f3;
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        
        .search-btn:hover {
            background: #1976d2;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .search-results {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            max-height: 300px;
            overflow-y: auto;
            width: 300px;
            display: none;
        }
        
        .search-result-item {
            padding: 10px 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background 0.2s ease;
        }
        
        .search-result-item:hover {
            background: #f8f9fa;
        }
        
        .search-result-item:last-child {
            border-bottom: none;
        }
        
        .search-highlight {
            background: yellow;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(255,255,255,0.3);
            z-index: 1002;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #2196f3 0%, #1976d2 100%);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        @media (max-width: 768px) {
            .nav-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .container {
                padding: 10px;
            }
            
            #backToTop {
                bottom: 20px;
                right: 20px;
                width: 45px;
                height: 45px;
                font-size: 18px;
            }
            
            .search-container {
                position: relative;
                top: auto;
                right: auto;
                margin: 10px 0;
                justify-content: center;
            }
            
            #searchInput {
                width: 150px;
            }
            
            #searchInput:focus {
                width: 180px;
            }
            
            .search-results {
                width: 250px;
            }
        }
    </style>
</head>
<body>
    <!-- 进度条 -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>
    
    <!-- 搜索功能 -->
    <div class="search-container">
        <input type="text" id="searchInput" placeholder="搜索教程内容...">
        <button class="search-btn" onclick="performSearch()">🔍</button>
        <button class="search-btn" onclick="clearSearch()">✖</button>
        <div class="search-results" id="searchResults"></div>
    </div>
    
    <div class="container">
        <header>
            <h1>📚 MySQL数据库入门教程</h1>
            <p class="subtitle">从零开始学习MySQL数据库，轻松掌握数据库基础知识</p>
        </header>
        
        <nav>
            <div class="nav-grid">
                <div class="nav-item active" onclick="showSection('intro')">🏠 什么是数据库</div>
                <div class="nav-item" onclick="showSection('install')">⚙️ 安装MySQL</div>
                <div class="nav-item" onclick="showSection('basic')">📝 基础操作</div>
                <div class="nav-item" onclick="showSection('table')">📊 创建表格</div>
                <div class="nav-item" onclick="showSection('data')">💾 数据操作</div>
                <div class="nav-item" onclick="showSection('query')">🔍 查询数据</div>
                <div class="nav-item" onclick="showSection('advanced')">🚀 高级查询</div>
                <div class="nav-item" onclick="showSection('index')">📈 索引优化</div>
                <div class="nav-item" onclick="showSection('view')">👁️ 视图</div>
                <div class="nav-item" onclick="showSection('procedure')">⚙️ 存储过程</div>
                <div class="nav-item" onclick="showSection('python')">🐍 Python操作</div>
                <div class="nav-item" onclick="showSection('window')">📊 窗口函数</div>
                <div class="nav-item" onclick="showSection('theory')">📚 理论基础</div>
                <div class="nav-item" onclick="showSection('security')">🔒 数据库安全</div>
                <div class="nav-item" onclick="showSection('backup')">💾 备份恢复</div>
                <div class="nav-item" onclick="showSection('performance')">⚡ 性能优化</div>
                <div class="nav-item" onclick="showSection('practice')">🎯 实战练习</div>
            </div>
        </nav>
        
        <div class="content">
            <!-- 什么是数据库 -->
            <div id="intro" class="section active">
                <h2>🏠 什么是数据库？</h2>
                
                <div class="highlight">
                    <h3>💡 简单理解</h3>
                    <p>数据库就像一个超级智能的<strong>电子文件柜</strong>，可以帮我们：</p>
                    <ul>
                        <li>📁 <strong>存储数据</strong>：像保存联系人、商品信息、学生成绩等</li>
                        <li>🔍 <strong>快速查找</strong>：瞬间找到你想要的信息</li>
                        <li>✏️ <strong>修改数据</strong>：随时更新信息</li>
                        <li>🗑️ <strong>删除数据</strong>：清理不需要的信息</li>
                    </ul>
                </div>
                
                <h3>🤔 为什么要学MySQL？</h3>
                <div class="example">
                    <p><strong>MySQL</strong>是世界上最受欢迎的数据库之一，就像：</p>
                    <ul>
                        <li>🆓 <strong>免费使用</strong>：不用花钱就能学习和使用</li>
                        <li>🌟 <strong>简单易学</strong>：语法接近英语，容易理解</li>
                        <li>🚀 <strong>应用广泛</strong>：网站、APP都在用</li>
                        <li>👥 <strong>社区活跃</strong>：遇到问题容易找到帮助</li>
                    </ul>
                </div>
                
                <div class="tip">
                    <strong>💡 小贴士：</strong>学会MySQL就像学会了一门通用语言，可以和各种数据库"对话"！
                </div>
            </div>
            
            <!-- 安装MySQL -->
            <div id="install" class="section">
                <h2>⚙️ 安装MySQL</h2>
                
                <h3>📥 下载MySQL</h3>
                <div class="example">
                    <p>1. 访问MySQL官网：<code>https://dev.mysql.com/downloads/</code></p>
                    <p>2. 选择"MySQL Community Server"（免费版本）</p>
                    <p>3. 根据你的操作系统下载对应版本</p>
                </div>
                
                <h3>🔧 安装步骤</h3>
                <ol>
                    <li><strong>运行安装程序</strong>：双击下载的文件</li>
                    <li><strong>选择安装类型</strong>：推荐选择"Developer Default"</li>
                    <li><strong>设置密码</strong>：为root用户设置一个好记的密码</li>
                    <li><strong>完成安装</strong>：等待安装完成</li>
                </ol>
                
                <div class="warning">
                    <strong>⚠️ 重要提醒：</strong>一定要记住你设置的root密码，这是管理员密码！
                </div>
                
                <h3>✅ 验证安装</h3>
                <div class="code">
-- 打开命令行，输入以下命令：
mysql -u root -p
-- 然后输入你设置的密码
                </div>
                
                <h3>🐧 Linux环境安装（进阶）</h3>
                <div class="example">
                    <h4>使用MariaDB（MySQL分支版本）</h4>
                    <div class="code">
# CentOS/RHEL系统
yum install mariadb mariadb-server
                    </div>
                    
                    <h4>官方MySQL安装</h4>
                    <div class="code">
# 下载MySQL安装包<br>
wget https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar<br>
<br>
# 解压安装包<br>
tar -xvf mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar<br>
<br>
# 移除MariaDB（如果存在）<br>
yum list installed | grep mariadb | awk '{print $1}' | xargs yum erase -y<br>
<br>
# 按顺序安装MySQL组件<br>
rpm -ivh mysql-community-common-5.7.26-1.el7.x86_64.rpm<br>
rpm -ivh mysql-community-libs-5.7.26-1.el7.x86_64.rpm<br>
rpm -ivh mysql-community-client-5.7.26-1.el7.x86_64.rpm<br>
rpm -ivh mysql-community-server-5.7.26-1.el7.x86_64.rpm<br>
                    </div>
                </div>
                
                <h3>⚙️ MySQL配置文件</h3>
                <div class="example">
                    <p>MySQL的配置文件位置：<code>/etc/my.cnf</code></p>
                    <div class="code">
[mysqld]
# 数据目录
datadir=/var/lib/mysql
# Socket文件位置
socket=/var/lib/mysql/mysql.sock
# 错误日志
log-error=/var/log/mysqld.log
# 进程ID文件
pid-file=/var/run/mysqld/mysqld.pid
# 字符集设置
character-set-server=utf8mb4
                    </div>
                </div>
                
                <h3>🚀 启动MySQL服务</h3>
                <div class="example">
                    <div class="code">
# 启动MySQL服务<br>
sudo systemctl start mysqld<br>
<br>
# 设置开机自启<br>
sudo systemctl enable mysqld<br>
<br>
# 查看服务状态<br>
sudo systemctl status mysqld<br>
<br>
# 检查端口占用（MySQL默认3306端口）<br>
netstat -ntlp | grep mysql<br>
                    </div>
                </div>
                
                <h3>🔐 首次登录和密码设置</h3>
                <div class="example">
                    <h4>查找初始密码</h4>
                    <div class="code">
# 查看MySQL日志中的临时密码<br>
sudo cat /var/log/mysqld.log | grep password<br>
                    </div>
                    
                    <h4>修改root密码</h4>
                    <div class="code">
-- 连接MySQL<br>
mysql -u root -p<br>
<br>
-- 修改密码策略（允许简单密码）<br>
SET GLOBAL validate_password_policy=0;<br>
SET GLOBAL validate_password_length=6;<br>
<br>
-- 修改root密码<br>
ALTER USER 'root'@'localhost' IDENTIFIED BY '123456';<br>
                    </div>
                    
                    <div class="warning">
                        <strong>⚠️ 安全提醒：</strong>生产环境中请使用强密码，不要使用简单密码如123456！
                    </div>
                </div>
                
                <h3>🛠️ 图形化管理工具</h3>
                <div class="example">
                    <ul>
                        <li><strong>MySQL Workbench</strong> - 官方提供的免费工具</li>
                        <li><strong>Navicat for MySQL</strong> - 界面友好，功能强大</li>
                        <li><strong>SQLyog</strong> - 专业的MySQL管理工具</li>
                        <li><strong>phpMyAdmin</strong> - 基于Web的管理界面</li>
                    </ul>
                </div>
                
                <div class="tip">
                    <strong>💡 提示：</strong>如果能成功登录，说明MySQL安装成功了！
                </div>
            </div>
            
            <!-- 基础操作 -->
            <div id="basic" class="section">
                <h2>📝 基础操作</h2>
                
                <h3>🎯 第一步：连接数据库</h3>
                <div class="code">
-- 连接到MySQL
mysql -u root -p
-- 输入密码后按回车
                </div>
                
                <h3>🏗️ 创建数据库</h3>
                <div class="example">
                    <p>数据库就像一个<strong>大仓库</strong>，我们先要建一个仓库：</p>
                    <div class="code">
-- 创建一个名为"学校管理"的数据库
CREATE DATABASE 学校管理;

-- 查看所有数据库
SHOW DATABASES;

-- 使用这个数据库
USE 学校管理;
                    </div>
                </div>
                
                <h3>📋 常用命令</h3>
                <table>
                    <tr>
                        <th>命令</th>
                        <th>作用</th>
                        <th>例子</th>
                    </tr>
                    <tr>
                        <td>SELECT VERSION();</td>
                        <td>查看MySQL版本</td>
                        <td>检查数据库版本信息</td>
                    </tr>
                    <tr>
                        <td>SHOW DATABASES;</td>
                        <td>查看所有数据库</td>
                        <td>看看有哪些仓库</td>
                    </tr>
                    <tr>
                        <td>USE 数据库名;</td>
                        <td>选择使用某个数据库</td>
                        <td>进入某个仓库</td>
                    </tr>
                    <tr>
                        <td>SHOW TABLES;</td>
                        <td>查看当前数据库的所有表</td>
                        <td>看看仓库里有哪些货架</td>
                    </tr>
                    <tr>
                        <td>SHOW CHARACTER SET;</td>
                        <td>查看支持的字符集</td>
                        <td>查看编码格式</td>
                    </tr>
                    <tr>
                        <td>? contents;</td>
                        <td>获取帮助目录</td>
                        <td>查看帮助信息</td>
                    </tr>
                </table>
                
                <h3>🆘 获取帮助</h3>
                <div class="example">
                    <p>MySQL提供了强大的帮助系统：</p>
                    <div class="code">
-- 查看帮助目录<br>
? contents;<br>
<br>
-- 查看函数帮助<br>
? functions;<br>
<br>
-- 查看数值函数<br>
? numeric functions;<br>
<br>
-- 查看具体函数用法<br>
? round;<br>
<br>
-- 查看数据类型<br>
? data types;<br>
<br>
-- 查看具体数据类型<br>
? longblob;<br>
                    </div>
                </div>
                
                <div class="tip">
                    <strong>💡 记忆技巧：</strong>SQL命令都是英语单词，SHOW=显示，CREATE=创建，USE=使用
                </div>
            </div>
            
            <!-- 创建表格 -->
            <div id="table" class="section">
                <h2>📊 创建表格</h2>
                
                <h3>🤔 什么是表格？</h3>
                <div class="highlight">
                    <p>表格就像Excel表格一样，有<strong>行</strong>和<strong>列</strong>：</p>
                    <ul>
                        <li>📊 <strong>列（字段）</strong>：存储同一类信息，比如"姓名"、"年龄"</li>
                        <li>📝 <strong>行（记录）</strong>：存储一个完整的信息，比如一个学生的所有信息</li>
                    </ul>
                </div>
                
                <h3>👨‍🎓 实例：创建学生表</h3>
                <div class="example">
                    <p>让我们创建一个学生信息表：</p>
                    <div class="code">
CREATE TABLE 学生表 (<br>
    学号 INT PRIMARY KEY,<br>
    姓名 VARCHAR(50) NOT NULL,<br>
    年龄 INT,<br>
    性别 VARCHAR(10),<br>
    班级 VARCHAR(20)<br>
);<br>
                    </div>
                </div>
                
                <h3>📚 数据类型说明</h3>
                <table>
                    <tr>
                        <th>数据类型</th>
                        <th>用途</th>
                        <th>例子</th>
                    </tr>
                    <tr>
                        <td>INT</td>
                        <td>整数</td>
                        <td>年龄：18</td>
                    </tr>
                    <tr>
                        <td>VARCHAR(长度)</td>
                        <td>文字</td>
                        <td>姓名："张三"</td>
                    </tr>
                    <tr>
                        <td>DATE</td>
                        <td>日期</td>
                        <td>生日：2005-03-15</td>
                    </tr>
                    <tr>
                        <td>DECIMAL(总位数,小数位)</td>
                        <td>小数</td>
                        <td>成绩：95.5</td>
                    </tr>
                </table>
                
                <h3>🔑 重要概念</h3>
                <div class="tip">
                    <ul>
                        <li><strong>PRIMARY KEY</strong>：主键，每行的唯一标识（像身份证号）</li>
                        <li><strong>NOT NULL</strong>：不能为空，必须填写</li>
                        <li><strong>VARCHAR(50)</strong>：最多50个字符的文字</li>
                    </ul>
                </div>
                
                <h3>⚙️ 存储引擎</h3>
                <div class="example">
                    <p>存储引擎决定了数据如何存储和处理，就像不同的文件格式：</p>
                    <div class="code">
-- 查看所有存储引擎<br>
SHOW ENGINES;<br>
<br>
-- 创建表时指定存储引擎<br>
CREATE TABLE 学生表 (<br>
    学号 INT PRIMARY KEY,<br>
    姓名 VARCHAR(50) NOT NULL<br>
) ENGINE=InnoDB;<br>
                    </div>
                </div>
                
                <h3>🏗️ 常用存储引擎对比</h3>
                <table>
                    <tr>
                        <th>存储引擎</th>
                        <th>事务支持</th>
                        <th>锁机制</th>
                        <th>适用场景</th>
                    </tr>
                    <tr>
                        <td><strong>InnoDB</strong> ⭐推荐</td>
                        <td>✅ 支持</td>
                        <td>行锁</td>
                        <td>高并发、事务处理</td>
                    </tr>
                    <tr>
                        <td>MyISAM</td>
                        <td>❌ 不支持</td>
                        <td>表锁</td>
                        <td>读多写少的场景</td>
                    </tr>
                    <tr>
                        <td>MEMORY</td>
                        <td>❌ 不支持</td>
                        <td>表锁</td>
                        <td>临时数据、缓存</td>
                    </tr>
                </table>
                
                <div class="tip">
                    <strong>💡 推荐：</strong>现代应用建议使用InnoDB引擎，它支持事务、外键约束和行级锁定。
                </div>
                
                <h3>🌐 字符集设置</h3>
                <div class="example">
                    <p>字符集决定了能存储哪些字符：</p>
                    <div class="code">
-- 查看支持的字符集<br>
SHOW CHARACTER SET;<br>
<br>
-- 创建数据库时指定字符集（推荐utf8mb4）<br>
CREATE DATABASE 学校管理 <br>
DEFAULT CHARACTER SET utf8mb4;<br>
                    </div>
                    
                    <div class="highlight">
                        <p><strong>字符集选择建议：</strong></p>
                        <ul>
                            <li><strong>utf8mb4</strong> ⭐推荐：支持所有Unicode字符，包括Emoji</li>
                            <li><strong>utf8</strong>：支持大部分Unicode字符（最大3字节）</li>
                            <li><strong>gbk</strong>：支持中文，但不支持其他语言</li>
                        </ul>
                     </div>
                 </div>
                 
                 <h3>🔗 外键约束</h3>
                 <div class="example">
                     <p>外键用于建立表与表之间的关系，确保数据的完整性：</p>
                     <div class="code">
-- 创建学院表<br>
CREATE TABLE 学院表 (<br>
    学院编号 INT PRIMARY KEY,<br>
    学院名称 VARCHAR(50) NOT NULL<br>
) ENGINE=InnoDB;<br>
<br>
-- 创建学生表（包含外键）<br>
CREATE TABLE 学生表 (<br>
    学号 INT PRIMARY KEY,<br>
    姓名 VARCHAR(50) NOT NULL,<br>
    学院编号 INT,<br>
    FOREIGN KEY (学院编号) REFERENCES 学院表(学院编号)<br>
) ENGINE=InnoDB;<br>
                     </div>
                 </div>
                 
                 <div class="highlight">
                     <p><strong>外键约束的作用：</strong></p>
                     <ul>
                         <li>🔒 <strong>数据完整性</strong>：防止插入不存在的关联数据</li>
                         <li>🛡️ <strong>级联操作</strong>：可以设置级联删除和更新</li>
                         <li>📋 <strong>关系维护</strong>：自动维护表之间的关系</li>
                     </ul>
                 </div>
                 
                 <div class="warning">
                     <strong>⚠️ 注意：</strong>只有InnoDB存储引擎支持外键约束！
                 </div>
             </div>
            
            <!-- 数据操作 -->
            <div id="data" class="section">
                <h2>💾 数据操作</h2>
                
                <h3>➕ 添加数据</h3>
                <div class="example">
                    <p>向学生表中添加学生信息：</p>
                    <div class="code">
-- 添加一个学生<br>
INSERT INTO 学生表 (学号, 姓名, 年龄, 性别, 班级) <br>
VALUES (1001, '张三', 18, '男', '高一1班');<br>
<br>
-- 添加多个学生<br>
INSERT INTO 学生表 VALUES <br>
(1002, '李四', 17, '女', '高一1班'),<br>
(1003, '王五', 18, '男', '高一2班');<br>
                    </div>
                </div>
                
                <h3>✏️ 修改数据</h3>
                <div class="example">
                    <div class="code">
-- 修改张三的年龄<br>
UPDATE 学生表 SET 年龄 = 19 WHERE 姓名 = '张三';<br>
<br>
-- 修改高一1班所有学生的班级<br>
UPDATE 学生表 SET 班级 = '高二1班' WHERE 班级 = '高一1班';<br>
                    </div>
                </div>
                
                <h3>🗑️ 删除数据</h3>
                <div class="warning">
                    <strong>⚠️ 注意：</strong>删除操作要小心，删除后数据就找不回来了！
                </div>
                <div class="code">
-- 删除特定学生<br>
DELETE FROM 学生表 WHERE 学号 = 1003;<br>
<br>
-- 删除所有数据（保留表结构）<br>
DELETE FROM 学生表;<br>
                </div>
                
                <div class="tip">
                    <strong>💡 记忆口诀：</strong>
                    <ul>
                        <li>INSERT = 插入新数据</li>
                        <li>UPDATE = 更新已有数据</li>
                        <li>DELETE = 删除数据</li>
                    </ul>
                </div>
            </div>
            
            <!-- 查询数据 -->
            <div id="query" class="section">
                <h2>🔍 查询数据</h2>
                
                <h3>👀 基础查询</h3>
                <div class="example">
                    <div class="code">
-- 查看所有学生信息<br>
SELECT * FROM 学生表;<br>
<br>
-- 只查看姓名和年龄<br>
SELECT 姓名, 年龄 FROM 学生表;<br>
<br>
-- 查看所有男学生<br>
SELECT * FROM 学生表 WHERE 性别 = '男';<br>
                    </div>
                </div>
                
                <h3>🎯 条件查询</h3>
                <table>
                    <tr>
                        <th>条件</th>
                        <th>符号</th>
                        <th>例子</th>
                    </tr>
                    <tr>
                        <td>等于</td>
                        <td>=</td>
                        <td>年龄 = 18</td>
                    </tr>
                    <tr>
                        <td>大于</td>
                        <td>></td>
                        <td>年龄 > 17</td>
                    </tr>
                    <tr>
                        <td>小于</td>
                        <td><</td>
                        <td>年龄 < 20</td>
                    </tr>
                    <tr>
                        <td>包含</td>
                        <td>LIKE</td>
                        <td>姓名 LIKE '张%'</td>
                    </tr>
                </table>
                
                <h3>🔥 实用查询示例</h3>
                <div class="example">
                    <div class="code">
-- 查找年龄在17-19岁之间的学生<br>
SELECT * FROM 学生表 WHERE 年龄 BETWEEN 17 AND 19;<br>
<br>
-- 查找姓张的学生<br>
SELECT * FROM 学生表 WHERE 姓名 LIKE '张%';<br>
<br>
-- 按年龄排序<br>
SELECT * FROM 学生表 ORDER BY 年龄;<br>
<br>
-- 统计学生总数<br>
SELECT COUNT(*) FROM 学生表;<br>
                    </div>
                </div>
                
                <div class="tip">
                    <strong>💡 查询技巧：</strong>
                    <ul>
                        <li><code>*</code> 表示所有列</li>
                        <li><code>%</code> 表示任意字符</li>
                        <li><code>ORDER BY</code> 用于排序</li>
                        <li><code>COUNT(*)</code> 用于计数</li>
                    </ul>
                </div>
            </div>
            
            <!-- 高级查询 -->
            <div id="advanced" class="section">
                <h2>🚀 高级查询</h2>
                
                <h3>🔗 连接查询</h3>
                <div class="highlight">
                    <p>连接查询用于从多个表中获取数据，就像把不同的表格拼接在一起：</p>
                </div>
                
                <div class="example">
                    <h4>内连接（INNER JOIN）</h4>
                    <div class="code">
-- 查询学生姓名和所在学院名称<br>
SELECT s.姓名, c.学院名称 <br>
FROM 学生表 s <br>
INNER JOIN 学院表 c ON s.学院编号 = c.学院编号;<br>
                    </div>
                </div>
                
                <div class="example">
                    <h4>左连接（LEFT JOIN）</h4>
                    <div class="code">
-- 查询所有学生信息，包括没有选课的学生<br>
SELECT s.姓名, c.课程名称 <br>
FROM 学生表 s <br>
LEFT JOIN 选课表 sc ON s.学号 = sc.学号<br>
LEFT JOIN 课程表 c ON sc.课程编号 = c.课程编号;<br>
                    </div>
                </div>
                
                <h3>📊 聚合函数</h3>
                <table>
                    <tr>
                        <th>函数</th>
                        <th>作用</th>
                        <th>例子</th>
                    </tr>
                    <tr>
                        <td>COUNT()</td>
                        <td>计数</td>
                        <td>COUNT(*) - 统计行数</td>
                    </tr>
                    <tr>
                        <td>SUM()</td>
                        <td>求和</td>
                        <td>SUM(成绩) - 总分</td>
                    </tr>
                    <tr>
                        <td>AVG()</td>
                        <td>平均值</td>
                        <td>AVG(成绩) - 平均分</td>
                    </tr>
                    <tr>
                        <td>MAX()</td>
                        <td>最大值</td>
                        <td>MAX(成绩) - 最高分</td>
                    </tr>
                    <tr>
                        <td>MIN()</td>
                        <td>最小值</td>
                        <td>MIN(成绩) - 最低分</td>
                    </tr>
                </table>
                
                <h3>🎯 分组查询</h3>
                <div class="example">
                    <div class="code">
-- 统计每个班级的学生人数<br>
SELECT 班级, COUNT(*) AS 人数 <br>
FROM 学生表 <br>
GROUP BY 班级;<br>
<br>
-- 查询平均分大于80的班级<br>
SELECT 班级, AVG(成绩) AS 平均分 <br>
FROM 学生表 <br>
GROUP BY 班级 <br>
HAVING AVG(成绩) > 80;<br>
                    </div>
                </div>
                
                <div class="tip">
                    <strong>💡 记住：</strong>
                    <ul>
                        <li>WHERE 用于分组前筛选</li>
                        <li>HAVING 用于分组后筛选</li>
                        <li>GROUP BY 必须在 WHERE 之后，ORDER BY 之前</li>
                    </ul>
                </div>
                
                <h3>🔧 MySQL运算符</h3>
                
                <h4>算术运算符</h4>
                <table>
                    <tr>
                        <th>运算符</th>
                        <th>说明</th>
                        <th>示例</th>
                    </tr>
                    <tr>
                        <td>+</td>
                        <td>加法</td>
                        <td>SELECT 5 + 3; -- 结果：8</td>
                    </tr>
                    <tr>
                        <td>-</td>
                        <td>减法</td>
                        <td>SELECT 10 - 4; -- 结果：6</td>
                    </tr>
                    <tr>
                        <td>*</td>
                        <td>乘法</td>
                        <td>SELECT 6 * 7; -- 结果：42</td>
                    </tr>
                    <tr>
                        <td>/</td>
                        <td>除法</td>
                        <td>SELECT 15 / 3; -- 结果：5</td>
                    </tr>
                    <tr>
                        <td>%</td>
                        <td>取模</td>
                        <td>SELECT 10 % 3; -- 结果：1</td>
                    </tr>
                </table>
                
                <h4>比较运算符</h4>
                <table>
                    <tr>
                        <th>运算符</th>
                        <th>说明</th>
                        <th>示例</th>
                    </tr>
                    <tr>
                        <td>=</td>
                        <td>等于</td>
                        <td>WHERE age = 25</td>
                    </tr>
                    <tr>
                        <td>!=, <></td>
                        <td>不等于</td>
                        <td>WHERE status != 'inactive'</td>
                    </tr>
                    <tr>
                        <td>>, <</td>
                        <td>大于，小于</td>
                        <td>WHERE salary > 5000</td>
                    </tr>
                    <tr>
                        <td>>=, <=</td>
                        <td>大于等于，小于等于</td>
                        <td>WHERE score >= 60</td>
                    </tr>
                    <tr>
                        <td>BETWEEN</td>
                        <td>在范围内</td>
                        <td>WHERE age BETWEEN 18 AND 65</td>
                    </tr>
                    <tr>
                        <td>IN</td>
                        <td>在列表中</td>
                        <td>WHERE city IN ('北京', '上海')</td>
                    </tr>
                    <tr>
                        <td>LIKE</td>
                        <td>模糊匹配</td>
                        <td>WHERE name LIKE '张%'</td>
                    </tr>
                </table>
                
                <h4>逻辑运算符</h4>
                <table>
                    <tr>
                        <th>运算符</th>
                        <th>说明</th>
                        <th>示例</th>
                    </tr>
                    <tr>
                        <td>AND</td>
                        <td>逻辑与</td>
                        <td>WHERE age > 18 AND status = 'active'</td>
                    </tr>
                    <tr>
                        <td>OR</td>
                        <td>逻辑或</td>
                        <td>WHERE city = '北京' OR city = '上海'</td>
                    </tr>
                    <tr>
                        <td>NOT</td>
                        <td>逻辑非</td>
                        <td>WHERE NOT status = 'deleted'</td>
                    </tr>
                </table>
                
                <h3>🔨 MySQL常用函数</h3>
                
                <h4>字符串函数</h4>
                <div class="example">
                    <div class="code">
-- 字符串连接
SELECT CONCAT('Hello', ' ', 'World'); -- 结果：Hello World

-- 字符串长度
SELECT LENGTH('MySQL'); -- 结果：5

-- 字符串截取
SELECT SUBSTRING('Hello World', 1, 5); -- 结果：Hello

-- 大小写转换
SELECT UPPER('mysql'), LOWER('MYSQL'); -- 结果：MYSQL, mysql

-- 去除空格
SELECT TRIM('  Hello  '); -- 结果：Hello

-- 字符串替换
SELECT REPLACE('Hello World', 'World', 'MySQL'); -- 结果：Hello MySQL
                    </div>
                </div>
                
                <h4>数值函数</h4>
                <div class="example">
                    <div class="code">
-- 绝对值
SELECT ABS(-10); -- 结果：10

-- 向上取整/向下取整
SELECT CEILING(4.3), FLOOR(4.8); -- 结果：5, 4

-- 四舍五入
SELECT ROUND(3.14159, 2); -- 结果：3.14

-- 随机数
SELECT RAND(); -- 结果：0到1之间的随机数

-- 求幂
SELECT POW(2, 3); -- 结果：8

-- 平方根
SELECT SQRT(16); -- 结果：4
                    </div>
                </div>
                
                <h4>日期时间函数</h4>
                <div class="example">
                    <div class="code">
-- 获取当前日期时间
SELECT NOW(), CURDATE(), CURTIME();

-- 提取日期部分
SELECT YEAR(NOW()), MONTH(NOW()), DAY(NOW());

-- 日期计算
SELECT DATE_ADD(NOW(), INTERVAL 7 DAY); -- 7天后
SELECT DATE_SUB(NOW(), INTERVAL 1 MONTH); -- 1个月前

-- 日期差值
SELECT DATEDIFF('2024-12-31', '2024-01-01'); -- 相差天数

-- 格式化日期
SELECT DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i:%s');
                    </div>
                </div>
                
                <h4>条件函数</h4>
                <div class="example">
                    <div class="code">
-- IF函数
SELECT name, IF(score >= 60, '及格', '不及格') AS result
FROM students;

-- CASE语句
SELECT name,
    CASE 
        WHEN score >= 90 THEN '优秀'
        WHEN score >= 80 THEN '良好'
        WHEN score >= 60 THEN '及格'
        ELSE '不及格'
    END AS grade
FROM students;

-- IFNULL函数
SELECT name, IFNULL(phone, '未提供') AS contact
FROM users;
                    </div>
                </div>
                
                <h4>其他常用函数</h4>
                <div class="example">
                    <div class="code">
-- 获取数据库信息
SELECT DATABASE(), VERSION(), USER();

-- 生成UUID
SELECT UUID();

-- MD5加密
SELECT MD5('password123');

-- 获取最后插入的ID
SELECT LAST_INSERT_ID();

-- 统计函数
SELECT COUNT(*), MAX(salary), MIN(salary), AVG(salary)
FROM employees;
                    </div>
                </div>
            </div>
            
            <!-- 索引优化 -->
            <div id="index" class="section">
                <h2>📈 索引优化</h2>
                
                <h3>🤔 什么是索引？</h3>
                <div class="highlight">
                    <p>索引就像书的<strong>目录</strong>，帮助我们快速找到想要的内容：</p>
                    <ul>
                        <li>📚 <strong>没有索引</strong>：像没有目录的书，要一页页翻找</li>
                        <li>🎯 <strong>有了索引</strong>：直接通过目录定位到具体页面</li>
                    </ul>
                </div>
                
                <h3>➕ 创建索引</h3>
                <div class="example">
                    <div class="code">
-- 为姓名列创建索引
CREATE INDEX idx_student_name ON 学生表(姓名);

-- 创建复合索引（多列索引）
CREATE INDEX idx_class_age ON 学生表(班级, 年龄);

-- 创建唯一索引
CREATE UNIQUE INDEX idx_student_id ON 学生表(学号);
                    </div>
                </div>
                
                <h3>🔍 查看索引效果</h3>
                <div class="example">
                    <div class="code">
-- 查看SQL执行计划
EXPLAIN SELECT * FROM 学生表 WHERE 姓名 = '张三';

-- 查看表的所有索引
SHOW INDEX FROM 学生表;
                    </div>
                </div>
                
                <h3>🗑️ 删除索引</h3>
                <div class="code">
-- 删除索引
DROP INDEX idx_student_name ON 学生表;
                </div>
                
                <div class="warning">
                    <strong>⚠️ 索引使用原则：</strong>
                    <ul>
                        <li>经常用于查询条件的列适合建索引</li>
                        <li>索引不是越多越好，会影响插入和更新性能</li>
                        <li>小表不需要建索引</li>
                        <li>重复值太多的列不适合建索引</li>
                    </ul>
                </div>
            </div>
            
            <!-- 视图 -->
            <div id="view" class="section">
                <h2>👁️ 视图</h2>
                
                <h3>🤔 什么是视图？</h3>
                <div class="highlight">
                    <p>视图是<strong>虚拟的表</strong>，它不存储数据，只保存查询语句：</p>
                    <ul>
                        <li>🎭 <strong>虚拟性</strong>：看起来像表，实际是查询结果</li>
                        <li>🔒 <strong>安全性</strong>：可以隐藏敏感数据</li>
                        <li>♻️ <strong>重用性</strong>：复杂查询可以重复使用</li>
                    </ul>
                </div>
                
                <h3>➕ 创建视图</h3>
                <div class="example">
                    <div class="code">
-- 创建学生成绩视图
CREATE VIEW 学生成绩视图 AS
SELECT 
    s.姓名,
    s.班级,
    AVG(sc.成绩) AS 平均分
FROM 学生表 s
JOIN 选课表 sc ON s.学号 = sc.学号
GROUP BY s.学号, s.姓名, s.班级;
                    </div>
                </div>
                
                <h3>👀 使用视图</h3>
                <div class="example">
                    <div class="code">
-- 像使用普通表一样查询视图
SELECT * FROM 学生成绩视图 WHERE 平均分 > 85;

-- 查询优秀学生
SELECT 姓名, 班级, 平均分 
FROM 学生成绩视图 
ORDER BY 平均分 DESC 
LIMIT 10;
                    </div>
                </div>
                
                <h3>🗑️ 删除视图</h3>
                <div class="code">
DROP VIEW 学生成绩视图;
                </div>
                
                <div class="tip">
                    <strong>💡 视图的好处：</strong>
                    <ul>
                        <li>简化复杂查询</li>
                        <li>提高数据安全性</li>
                        <li>提供不同的数据视角</li>
                        <li>保持数据的逻辑独立性</li>
                    </ul>
                </div>
            </div>
            
            <!-- 存储过程 -->
            <div id="procedure" class="section">
                <h2>⚙️ 存储过程</h2>
                
                <div class="highlight">
                    <h3>💡 什么是存储过程？</h3>
                    <p>存储过程是事先编译好存储在数据库中的<strong>一组SQL的集合</strong>，可以简化开发工作，减少通信开销，提升性能。</p>
                </div>
                
                <h3>🎯 存储过程的优势</h3>
                <div class="example">
                    <ul>
                        <li>📦 <strong>封装复杂操作</strong>：将多条SQL语句组合成一个单元</li>
                        <li>🚀 <strong>提升性能</strong>：预编译，执行速度更快</li>
                        <li>🔒 <strong>保证一致性</strong>：确保复杂业务逻辑的原子性</li>
                        <li>🛡️ <strong>增强安全性</strong>：隐藏数据表细节，防止SQL注入</li>
                        <li>♻️ <strong>代码复用</strong>：一次定义，多次调用</li>
                    </ul>
                </div>
                
                <h3>🏪 实际应用场景</h3>
                <div class="example">
                    <p><strong>电商订单处理示例：</strong></p>
                    <ol>
                        <li>🔍 核对库存是否充足</li>
                        <li>🔒 锁定库存，减少可用数量</li>
                        <li>⚠️ 库存不足时生成提示消息</li>
                        <li>📝 生成流水记录和用户通知</li>
                    </ol>
                </div>
                
                <h3>📝 基本语法</h3>
                <div class="code">
-- 创建存储过程的基本语法
DELIMITER $$

CREATE PROCEDURE 过程名(
    [IN|OUT|INOUT] 参数名 数据类型,
    ...
)
BEGIN
    -- SQL语句
END $$

DELIMITER ;
                </div>
                
                <h3>🔧 实战示例：课程成绩统计</h3>
                <div class="example">
                    <h4>创建存储过程</h4>
                    <div class="code">
-- 删除已存在的过程
DROP PROCEDURE IF EXISTS sp_score_by_cid;

-- 修改分隔符
DELIMITER $$

-- 创建存储过程
CREATE PROCEDURE sp_score_by_cid(
    courseId INT,                    -- 输入参数：课程ID
    OUT maxScore DECIMAL(4,1),       -- 输出参数：最高分
    OUT minScore DECIMAL(4,1),       -- 输出参数：最低分
    OUT avgScore DECIMAL(4,1)        -- 输出参数：平均分
)
BEGIN
    -- 查询最高分
    SELECT MAX(score) INTO maxScore 
    FROM tb_record WHERE cid = courseId;
    
    -- 查询最低分
    SELECT MIN(score) INTO minScore 
    FROM tb_record WHERE cid = courseId;
    
    -- 查询平均分
    SELECT AVG(score) INTO avgScore 
    FROM tb_record WHERE cid = courseId;
END $$

-- 恢复分隔符
DELIMITER ;
                    </div>
                </div>
                
                <h3>🎮 调用存储过程</h3>
                <div class="example">
                    <div class="code">
-- 调用存储过程
CALL sp_score_by_cid(1111, @a, @b, @c);

-- 查看输出参数的值
SELECT @a AS 最高分, @b AS 最低分, @c AS 平均分;
                    </div>
                </div>
                
                <h3>🗑️ 删除存储过程</h3>
                <div class="code">
-- 删除存储过程
DROP PROCEDURE sp_score_by_cid;

-- 查看所有存储过程
SHOW PROCEDURE STATUS;
                </div>
                
                <h3>📋 参数类型说明</h3>
                <table>
                    <tr>
                        <th>参数类型</th>
                        <th>说明</th>
                        <th>示例</th>
                    </tr>
                    <tr>
                        <td><strong>IN</strong></td>
                        <td>输入参数（默认）</td>
                        <td>IN userId INT</td>
                    </tr>
                    <tr>
                        <td><strong>OUT</strong></td>
                        <td>输出参数</td>
                        <td>OUT totalCount INT</td>
                    </tr>
                    <tr>
                        <td><strong>INOUT</strong></td>
                        <td>输入输出参数</td>
                        <td>INOUT counter INT</td>
                    </tr>
                </table>
                
                <div class="tip">
                    <strong>💡 DELIMITER说明：</strong>因为存储过程中包含多条SQL语句（用分号分隔），所以需要临时改变语句结束符，避免冲突。
                </div>
                
                <h3>⚖️ 使用注意事项</h3>
                <div class="warning">
                    <h4>⚠️ 优缺点权衡</h4>
                    <p><strong>优点：</strong></p>
                    <ul>
                        <li>✅ 执行效率高，减少网络传输</li>
                        <li>✅ 业务逻辑集中管理</li>
                        <li>✅ 提高安全性</li>
                    </ul>
                    <p><strong>缺点：</strong></p>
                    <ul>
                        <li>❌ 占用数据库服务器CPU资源</li>
                        <li>❌ 调试和维护相对困难</li>
                        <li>❌ 数据库移植性较差</li>
                    </ul>
                </div>
                
                <div class="tip">
                    <strong>💡 最佳实践：</strong>复杂的业务逻辑建议放在应用服务器处理，存储过程主要用于简单的数据操作和统计。
                </div>
            </div>
            
            <!-- Python操作MySQL -->
            <div id="python" class="section">
                <h2>🐍 Python操作MySQL</h2>
                
                <h3>📦 安装PyMySQL</h3>
                <div class="code">
pip install pymysql
                </div>
                
                <h3>🔌 连接数据库</h3>
                <div class="example">
                    <div class="code">
import pymysql

# 创建数据库连接
connection = pymysql.connect(
    host='localhost',      # 数据库主机
    port=3306,            # 端口号
    user='root',          # 用户名
    password='123456',    # 密码
    database='学校管理',   # 数据库名
    charset='utf8'        # 字符编码
)
                    </div>
                </div>
                
                <h3>➕ 插入数据</h3>
                <div class="example">
                    <div class="code">
def add_student(name, age, gender, class_name):
    try:
        with connection.cursor() as cursor:
            sql = "INSERT INTO 学生表 (姓名, 年龄, 性别, 班级) VALUES (%s, %s, %s, %s)"
            cursor.execute(sql, (name, age, gender, class_name))
        connection.commit()
        print("学生添加成功！")
    except Exception as e:
        print(f"添加失败：{e}")
        connection.rollback()

# 使用示例
add_student('李明', 18, '男', '高一1班')
                    </div>
                </div>
                
                <h3>🔍 查询数据</h3>
                <div class="example">
                    <div class="code">
def get_all_students():
    try:
        with connection.cursor() as cursor:
            sql = "SELECT * FROM 学生表"
            cursor.execute(sql)
            results = cursor.fetchall()
            
            print("所有学生信息：")
            for student in results:
                print(f"学号：{student[0]}, 姓名：{student[1]}, 年龄：{student[2]}")
                
    except Exception as e:
        print(f"查询失败：{e}")

# 使用示例
get_all_students()
                    </div>
                </div>
                
                <h3>✏️ 更新数据</h3>
                <div class="example">
                    <div class="code">
def update_student_age(student_id, new_age):
    try:
        with connection.cursor() as cursor:
            sql = "UPDATE 学生表 SET 年龄 = %s WHERE 学号 = %s"
            result = cursor.execute(sql, (new_age, student_id))
            
        if result > 0:
            connection.commit()
            print("更新成功！")
        else:
            print("没有找到该学生")
            
    except Exception as e:
        print(f"更新失败：{e}")
        connection.rollback()

# 使用示例
update_student_age(1001, 19)
                    </div>
                </div>
                
                <h3>🗑️ 删除数据</h3>
                <div class="example">
                    <div class="code">
def delete_student(student_id):
    try:
        with connection.cursor() as cursor:
            sql = "DELETE FROM 学生表 WHERE 学号 = %s"
            result = cursor.execute(sql, (student_id,))
            
        if result > 0:
            connection.commit()
            print("删除成功！")
        else:
            print("没有找到该学生")
            
    except Exception as e:
        print(f"删除失败：{e}")
        connection.rollback()

# 使用示例
delete_student(1001)
                    </div>
                </div>
                
                <h3>🔒 关闭连接</h3>
                <div class="code">
# 使用完毕后关闭连接
connection.close()
                </div>
                
                <div class="warning">
                    <strong>⚠️ 安全提醒：</strong>
                    <ul>
                        <li>永远不要在代码中硬编码密码</li>
                        <li>使用参数化查询防止SQL注入</li>
                        <li>及时关闭数据库连接</li>
                        <li>使用事务确保数据一致性</li>
                    </ul>
                </div>
                
                <div class="tip">
                    <strong>💡 最佳实践：</strong>
                    <ul>
                        <li>使用连接池管理数据库连接</li>
                        <li>将数据库配置放在配置文件中</li>
                        <li>使用ORM框架（如SQLAlchemy）简化操作</li>
                        <li>添加适当的错误处理和日志记录</li>
                    </ul>
                </div>
            </div>
            
            <!-- MySQL8窗口函数 -->
            <div id="window" class="section">
                <h2>📊 MySQL8窗口函数</h2>
                
                <div class="highlight">
                    <h3>💡 什么是窗口函数？</h3>
                    <p>窗口函数是MySQL 8.0新增的强大功能，可以在查询结果中进行<strong>排名、累计、移动平均</strong>等复杂计算。</p>
                </div>
                
                <h3>🔧 基本语法</h3>
                <div class="code">
-- 窗口函数基本语法
SELECT 
    column1,
    column2,
    窗口函数() OVER (
        [PARTITION BY column]
        [ORDER BY column]
        [ROWS/RANGE BETWEEN ... AND ...]
    )
FROM table_name;
                </div>
                
                <h3>📈 常用窗口函数</h3>
                
                <h4>1. 排名函数</h4>
                <div class="example">
                    <div class="code">
-- ROW_NUMBER(): 连续排名
SELECT 
    ename,
    sal,
    ROW_NUMBER() OVER (ORDER BY sal DESC) as row_num
FROM tb_emp;

-- RANK(): 并列排名，有间隔
SELECT 
    ename,
    sal,
    RANK() OVER (ORDER BY sal DESC) as rank_num
FROM tb_emp;

-- DENSE_RANK(): 并列排名，无间隔
SELECT 
    ename,
    sal,
    DENSE_RANK() OVER (ORDER BY sal DESC) as dense_rank_num
FROM tb_emp;
                    </div>
                </div>
                
                <h4>2. 聚合窗口函数</h4>
                <div class="example">
                    <div class="code">
-- 累计求和
SELECT 
    ename,
    sal,
    SUM(sal) OVER (ORDER BY sal) as cumulative_sum
FROM tb_emp;

-- 移动平均
SELECT 
    ename,
    sal,
    AVG(sal) OVER (
        ORDER BY sal 
        ROWS BETWEEN 2 PRECEDING AND CURRENT ROW
    ) as moving_avg
FROM tb_emp;
                    </div>
                </div>
                
                <h4>3. 分区窗口函数</h4>
                <div class="example">
                    <div class="code">
-- 按部门排名
SELECT 
    ename,
    dno,
    sal,
    RANK() OVER (PARTITION BY dno ORDER BY sal DESC) as dept_rank
FROM tb_emp;

-- 部门内薪资占比
SELECT 
    ename,
    dno,
    sal,
    ROUND(sal / SUM(sal) OVER (PARTITION BY dno) * 100, 2) as sal_percentage
FROM tb_emp;
                    </div>
                </div>
                
                <div class="tip">
                    <strong>💡 窗口函数优势：</strong>可以在不使用GROUP BY的情况下进行分组计算，保留原始行数据！
                </div>
            </div>
            
            <!-- 理论基础 -->
            <div id="theory" class="section">
                <h2>📚 数据库理论基础</h2>
                
                <h3>🏛️ 关系数据库概述</h3>
                <div class="highlight">
                    <h4>💾 数据持久化</h4>
                    <p>将数据保存到能够长久保存数据的存储介质中，在掉电的情况下数据也不会丢失。</p>
                </div>
                
                <h4>📈 数据库发展史</h4>
                <div class="example">
                    <ul>
                        <li><strong>网状数据库</strong> - 早期的数据库模型</li>
                        <li><strong>层次数据库</strong> - 树形结构的数据库</li>
                        <li><strong>关系数据库</strong> - 基于关系模型的数据库（主流）</li>
                        <li><strong>NoSQL数据库</strong> - 非关系型数据库</li>
                        <li><strong>NewSQL数据库</strong> - 新型SQL数据库</li>
                    </ul>
                    <div class="tip">
                        <strong>📖 历史里程碑：</strong>1970年，IBM的研究员E.F.Codd发表了关于关系模型的论文，奠定了关系数据库的理论基础。
                    </div>
                </div>
                
                <h4>🔗 关系数据库特点</h4>
                <div class="example">
                    <ul>
                        <li><strong>理论基础：</strong>集合论和关系代数</li>
                        <li><strong>具体表象：</strong>用二维表（有行和列）组织数据</li>
                        <li><strong>编程语言：</strong>结构化查询语言（SQL）</li>
                    </ul>
                </div>
                
                <h4>🎯 ER模型（实体关系模型）</h4>
                <div class="example">
                    <p><strong>ER模型</strong>，全称为<strong>实体关系模型</strong>（Entity-Relationship Model），由美籍华裔计算机科学家陈品山先生提出，是概念数据模型的高层描述方式。</p>
                    
                    <h5>ER模型组成要素：</h5>
                    <ul>
                        <li><strong>实体</strong> - 矩形框表示</li>
                        <li><strong>属性</strong> - 椭圆框表示</li>
                        <li><strong>关系</strong> - 菱形框表示</li>
                        <li><strong>重数</strong> - 1:1（一对一）/ 1:N（一对多）/ M:N（多对多）</li>
                    </ul>
                    
                    <div class="tip">
                        <strong>💡 实际应用：</strong>可以利用数据库建模工具（如PowerDesigner）来绘制概念数据模型，然后转换成物理模型，最终生成创建二维表的SQL。
                    </div>
                </div>
                
                <h4>🏢 主流关系数据库产品</h4>
                <div class="example">
                    <ul>
                        <li><strong>Oracle</strong> - 世界上使用最广泛的数据库管理系统</li>
                        <li><strong>MySQL</strong> - 开源、高性能、适应性强</li>
                        <li><strong>SQL Server</strong> - Microsoft开发的关系型数据库</li>
                        <li><strong>PostgreSQL</strong> - BSD许可证下的开源数据库</li>
                        <li><strong>DB2</strong> - IBM公司开发的企业级数据库</li>
                    </ul>
                </div>
                
                <h3>📐 范式理论</h3>
                <div class="highlight">
                    <p>范式理论是设计关系型数据库中二维表的<strong>指导思想</strong>，帮助我们设计出结构良好的数据库。</p>
                </div>
                
                <h4>1. 第一范式（1NF）</h4>
                <div class="example">
                    <p><strong>要求：</strong>数据表的每个列的值域都是由原子值组成的，不能够再分割。</p>
                    <div class="code">
-- ❌ 违反第一范式（联系方式包含多个值）
CREATE TABLE student_bad (
    id INT,
    name VARCHAR(50),
    contact VARCHAR(100)  -- '电话:123456,邮箱:abc@qq.com'
);

-- ✅ 符合第一范式
CREATE TABLE student_good (
    id INT,
    name VARCHAR(50),
    phone VARCHAR(20),
    email VARCHAR(50)
);
                    </div>
                </div>
                
                <h4>2. 第二范式（2NF）</h4>
                <div class="example">
                    <p><strong>要求：</strong>数据表里的所有数据都要和该数据表的键（主键与候选键）有完全依赖关系。</p>
                    <div class="code">
-- ❌ 违反第二范式（课程名称只依赖课程ID，不依赖完整主键）
CREATE TABLE score_bad (
    student_id INT,
    course_id INT,
    course_name VARCHAR(50),  -- 只依赖course_id
    score INT,
    PRIMARY KEY (student_id, course_id)
);

-- ✅ 符合第二范式（分离成两个表）
CREATE TABLE course (
    course_id INT PRIMARY KEY,
    course_name VARCHAR(50)
);

CREATE TABLE score (
    student_id INT,
    course_id INT,
    score INT,
    PRIMARY KEY (student_id, course_id)
);
                    </div>
                </div>
                
                <h4>3. 第三范式（3NF）</h4>
                <div class="example">
                    <p><strong>要求：</strong>所有非键属性都只和候选键有相关性，非键属性之间应该是独立无关的。</p>
                    <div class="code">
-- ❌ 违反第三范式（部门名称依赖部门ID，而不是员工ID）
CREATE TABLE employee_bad (
    emp_id INT PRIMARY KEY,
    emp_name VARCHAR(50),
    dept_id INT,
    dept_name VARCHAR(50)  -- 依赖dept_id，不是emp_id
);

-- ✅ 符合第三范式
CREATE TABLE department (
    dept_id INT PRIMARY KEY,
    dept_name VARCHAR(50)
);

CREATE TABLE employee (
    emp_id INT PRIMARY KEY,
    emp_name VARCHAR(50),
    dept_id INT
);
                    </div>
                </div>
                
                <h3>🛡️ 数据完整性</h3>
                
                <h4>1. 实体完整性</h4>
                <div class="example">
                    <p><strong>目标：</strong>每个实体都是独一无二的</p>
                    <div class="code">
-- 主键约束
CREATE TABLE student (
    id INT PRIMARY KEY,  -- 主键
    name VARCHAR(50),
    email VARCHAR(100) UNIQUE  -- 唯一约束
);
                    </div>
                </div>
                
                <h4>2. 引用完整性</h4>
                <div class="example">
                    <p><strong>目标：</strong>关系中不允许引用不存在的实体</p>
                    <div class="code">
-- 外键约束
CREATE TABLE orders (
    order_id INT PRIMARY KEY,
    customer_id INT,
    order_date DATE,
    FOREIGN KEY (customer_id) REFERENCES customers(id)
);
                    </div>
                </div>
                
                <h4>3. 域完整性</h4>
                <div class="example">
                    <p><strong>目标：</strong>数据是有效的</p>
                    <div class="code">
CREATE TABLE product (
    id INT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,  -- 非空约束
    price DECIMAL(10,2) DEFAULT 0,  -- 默认值约束
    status ENUM('active', 'inactive') DEFAULT 'active',  -- 检查约束
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
                    </div>
                </div>
                
                <h3>🔄 数据一致性</h3>
                
                <h4>事务的ACID特性</h4>
                <div class="highlight">
                    <ul>
                        <li><strong>原子性（Atomicity）：</strong>事务作为一个整体被执行，要么全部成功，要么全部失败</li>
                        <li><strong>一致性（Consistency）：</strong>事务应确保数据库从一个一致状态转变为另一个一致状态</li>
                        <li><strong>隔离性（Isolation）：</strong>多个事务并发执行时，一个事务的执行不应影响其他事务</li>
                        <li><strong>持久性（Durability）：</strong>已被提交的事务对数据库的修改应该永久保存</li>
                    </ul>
                </div>
                
                <h4>事务操作示例</h4>
                <div class="example">
                    <div class="code">
-- 转账事务示例
START TRANSACTION;

-- 从账户A扣款
UPDATE accounts SET balance = balance - 1000 WHERE account_id = 'A';

-- 向账户B存款
UPDATE accounts SET balance = balance + 1000 WHERE account_id = 'B';

-- 检查操作是否成功
-- 如果成功，提交事务
COMMIT;

-- 如果失败，回滚事务
-- ROLLBACK;
                    </div>
                </div>
                
                <div class="warning">
                    <strong>⚠️ 注意：</strong>在MySQL中，检查约束（CHECK）在某些版本中可能不起作用，建议使用应用层验证。
                </div>
                
                <div class="tip">
                    <strong>💡 最佳实践：</strong>合理的数据库设计应该在性能和规范化之间找到平衡点！
                </div>
            </div>
            
            <!-- 数据库安全 -->
            <div id="security" class="section">
                <h2>🔒 数据库安全</h2>
                
                <h3>👤 用户权限管理</h3>
                <div class="highlight">
                    <p>数据库安全的核心是<strong>用户权限管理</strong>，确保只有授权用户才能访问相应的数据。</p>
                </div>
                
                <h4>创建用户</h4>
                <div class="example">
                    <div class="code">
-- 创建新用户
CREATE USER 'newuser'@'localhost' IDENTIFIED BY 'StrongPassword123!';

-- 创建允许远程连接的用户
CREATE USER 'remoteuser'@'%' IDENTIFIED BY 'StrongPassword123!';

-- 创建只允许特定IP连接的用户
CREATE USER 'specificuser'@'192.168.1.100' IDENTIFIED BY 'StrongPassword123!';
                    </div>
                </div>
                
                <h4>权限授予</h4>
                <div class="example">
                    <div class="code">
-- 授予数据库的所有权限
GRANT ALL PRIVILEGES ON database_name.* TO 'newuser'@'localhost';

-- 授予特定表的查询权限
GRANT SELECT ON database_name.table_name TO 'newuser'@'localhost';

-- 授予多种权限
GRANT SELECT, INSERT, UPDATE ON database_name.* TO 'newuser'@'localhost';

-- 授予创建数据库的权限
GRANT CREATE ON *.* TO 'newuser'@'localhost';

-- 刷新权限
FLUSH PRIVILEGES;
                    </div>
                </div>
                
                <h4>查看和撤销权限</h4>
                <div class="example">
                    <div class="code">
-- 查看用户权限
SHOW GRANTS FOR 'newuser'@'localhost';

-- 撤销权限
REVOKE INSERT, UPDATE ON database_name.* FROM 'newuser'@'localhost';

-- 删除用户
DROP USER 'newuser'@'localhost';
                    </div>
                </div>
                
                <h3>🔐 密码安全策略</h3>
                <div class="example">
                    <h4>设置密码策略</h4>
                    <div class="code">
-- 查看密码策略
SHOW VARIABLES LIKE 'validate_password%';

-- 设置密码复杂度
SET GLOBAL validate_password.policy = 'STRONG';
SET GLOBAL validate_password.length = 12;
SET GLOBAL validate_password.mixed_case_count = 2;
SET GLOBAL validate_password.number_count = 2;
SET GLOBAL validate_password.special_char_count = 2;
                    </div>
                    
                    <h4>修改用户密码</h4>
                    <div class="code">
-- 修改当前用户密码
ALTER USER USER() IDENTIFIED BY 'NewStrongPassword123!';

-- 修改其他用户密码
ALTER USER 'username'@'localhost' IDENTIFIED BY 'NewStrongPassword123!';

-- 设置密码过期
ALTER USER 'username'@'localhost' PASSWORD EXPIRE;
                    </div>
                </div>
                
                <h3>🛡️ 连接安全</h3>
                <div class="example">
                    <h4>SSL连接配置</h4>
                    <div class="code">
-- 查看SSL状态
SHOW VARIABLES LIKE 'have_ssl';

-- 要求用户使用SSL连接
ALTER USER 'secureuser'@'%' REQUIRE SSL;

-- 连接时使用SSL
mysql -u username -p --ssl-mode=REQUIRED
                    </div>
                    
                    <h4>限制连接数</h4>
                    <div class="code">
-- 限制用户最大连接数
ALTER USER 'username'@'localhost' WITH MAX_CONNECTIONS_PER_HOUR 100;
ALTER USER 'username'@'localhost' WITH MAX_USER_CONNECTIONS 10;
                    </div>
                </div>
                
                <h3>🔍 安全审计</h3>
                <div class="example">
                    <div class="code">
-- 查看当前连接
SHOW PROCESSLIST;

-- 查看用户登录历史（需要启用审计插件）
SELECT * FROM mysql.general_log WHERE command_type = 'Connect';

-- 查看失败的登录尝试
SHOW STATUS LIKE 'Aborted_connects';
                    </div>
                </div>
                
                <div class="warning">
                    <strong>⚠️ 安全最佳实践：</strong>
                    <ul>
                        <li>使用强密码，包含大小写字母、数字和特殊字符</li>
                        <li>定期更换密码</li>
                        <li>最小权限原则，只授予必要的权限</li>
                        <li>禁用不必要的用户账户</li>
                        <li>使用SSL加密连接</li>
                        <li>定期审计用户权限和访问日志</li>
                        <li>不要在代码中硬编码数据库密码</li>
                    </ul>
                </div>
            </div>
            
            <!-- 备份恢复 -->
            <div id="backup" class="section">
                <h2>💾 数据备份与恢复</h2>
                
                <h3>📦 数据备份</h3>
                <div class="highlight">
                    <p>数据备份是数据库管理的<strong>重要环节</strong>，可以防止数据丢失和系统故障。</p>
                </div>
                
                <h4>使用mysqldump备份</h4>
                <div class="example">
                    <div class="code">
# 备份单个数据库
mysqldump -u root -p database_name > backup.sql

# 备份多个数据库
mysqldump -u root -p --databases db1 db2 db3 > multiple_backup.sql

# 备份所有数据库
mysqldump -u root -p --all-databases > all_backup.sql

# 只备份表结构（不包含数据）
mysqldump -u root -p --no-data database_name > structure_only.sql

# 只备份数据（不包含表结构）
mysqldump -u root -p --no-create-info database_name > data_only.sql

# 备份特定表
mysqldump -u root -p database_name table1 table2 > tables_backup.sql
                    </div>
                </div>
                
                <h4>高级备份选项</h4>
                <div class="example">
                    <div class="code">
# 压缩备份
mysqldump -u root -p database_name | gzip > backup.sql.gz

# 备份时添加时间戳
mysqldump -u root -p database_name > backup_$(date +%Y%m%d_%H%M%S).sql

# 备份大数据库（分块处理）
mysqldump -u root -p --single-transaction --routines --triggers database_name > backup.sql

# 远程备份
mysqldump -h remote_host -u username -p database_name > remote_backup.sql
                    </div>
                </div>
                
                <h3>🔄 数据恢复</h3>
                <div class="example">
                    <h4>从备份文件恢复</h4>
                    <div class="code">
# 恢复数据库
mysql -u root -p database_name < backup.sql

# 恢复压缩备份
gunzip < backup.sql.gz | mysql -u root -p database_name

# 创建数据库并恢复
mysql -u root -p -e "CREATE DATABASE new_database;"
mysql -u root -p new_database < backup.sql
                    </div>
                    
                    <h4>部分恢复</h4>
                    <div class="code">
# 只恢复特定表
mysql -u root -p database_name < table_backup.sql

# 从完整备份中提取特定表
sed -n '/^-- Table structure for table `table_name`/,/^-- Table structure for table `/p' backup.sql > table_only.sql
                    </div>
                </div>
                
                <h3>⚡ 增量备份</h3>
                <div class="example">
                    <h4>启用二进制日志</h4>
                    <div class="code">
# 在my.cnf中配置
[mysqld]
log-bin=mysql-bin
server-id=1

# 查看二进制日志
SHOW BINARY LOGS;

# 查看二进制日志内容
SHOW BINLOG EVENTS IN 'mysql-bin.000001';
                    </div>
                    
                    <h4>使用二进制日志恢复</h4>
                    <div class="code">
# 从二进制日志恢复
mysqlbinlog mysql-bin.000001 | mysql -u root -p

# 指定时间范围恢复
mysqlbinlog --start-datetime="2024-01-01 00:00:00" --stop-datetime="2024-01-01 23:59:59" mysql-bin.000001 | mysql -u root -p

# 指定位置范围恢复
mysqlbinlog --start-position=1000 --stop-position=2000 mysql-bin.000001 | mysql -u root -p
                    </div>
                </div>
                
                <h3>🔄 自动化备份脚本</h3>
                <div class="example">
                    <div class="code">
#!/bin/bash
# MySQL自动备份脚本

# 配置变量
DB_USER="root"
DB_PASS="password"
DB_NAME="your_database"
BACKUP_DIR="/backup/mysql"
DATE=$(date +%Y%m%d_%H%M%S)

# 创建备份目录
mkdir -p $BACKUP_DIR

# 执行备份
mysqldump -u$DB_USER -p$DB_PASS $DB_NAME > $BACKUP_DIR/backup_$DATE.sql

# 压缩备份文件
gzip $BACKUP_DIR/backup_$DATE.sql

# 删除7天前的备份
find $BACKUP_DIR -name "backup_*.sql.gz" -mtime +7 -delete

echo "备份完成: backup_$DATE.sql.gz"
                    </div>
                </div>
                
                <div class="tip">
                    <strong>💡 备份策略建议：</strong>
                    <ul>
                        <li><strong>定期全量备份</strong>：每周进行一次完整备份</li>
                        <li><strong>增量备份</strong>：每天备份二进制日志</li>
                        <li><strong>异地备份</strong>：将备份文件存储到不同位置</li>
                        <li><strong>备份验证</strong>：定期测试备份文件的完整性</li>
                        <li><strong>文档记录</strong>：记录备份和恢复的操作步骤</li>
                    </ul>
                </div>
            </div>
            
            <!-- 性能优化 -->
            <div id="performance" class="section">
                <h2>⚡ 性能监控与优化</h2>
                
                <h3>📊 性能监控</h3>
                <div class="highlight">
                    <p>性能监控是数据库优化的<strong>第一步</strong>，通过监控可以发现性能瓶颈。</p>
                </div>
                
                <h4>查看服务器状态</h4>
                <div class="example">
                    <div class="code">
-- 查看连接状态
SHOW STATUS LIKE 'Threads_connected';
SHOW STATUS LIKE 'Threads_running';
SHOW STATUS LIKE 'Max_used_connections';

-- 查看查询统计
SHOW STATUS LIKE 'Questions';
SHOW STATUS LIKE 'Queries';
SHOW STATUS LIKE 'Slow_queries';

-- 查看缓存命中率
SHOW STATUS LIKE 'Qcache_hits';
SHOW STATUS LIKE 'Qcache_inserts';

-- 查看InnoDB状态
SHOW ENGINE INNODB STATUS\G
                    </div>
                </div>
                
                <h4>慢查询日志</h4>
                <div class="example">
                    <div class="code">
-- 启用慢查询日志
SET GLOBAL slow_query_log = 'ON';
SET GLOBAL long_query_time = 2;
SET GLOBAL slow_query_log_file = '/var/log/mysql/slow.log';

-- 查看慢查询配置
SHOW VARIABLES LIKE 'slow_query%';
SHOW VARIABLES LIKE 'long_query_time';

-- 分析慢查询日志
# 使用mysqldumpslow工具
mysqldumpslow -s t -t 10 /var/log/mysql/slow.log
                    </div>
                </div>
                
                <h3>🔍 查询优化</h3>
                <div class="example">
                    <h4>使用EXPLAIN分析查询</h4>
                    <div class="code">
-- 分析查询执行计划
EXPLAIN SELECT * FROM users WHERE age > 25;

-- 详细分析
EXPLAIN FORMAT=JSON SELECT * FROM users WHERE age > 25;

-- 分析更新语句
EXPLAIN UPDATE users SET status = 'active' WHERE age > 25;
                    </div>
                    
                    <h4>查询优化技巧</h4>
                    <div class="code">
-- 避免SELECT *
SELECT id, name, email FROM users WHERE age > 25;

-- 使用LIMIT限制结果
SELECT * FROM users ORDER BY created_at DESC LIMIT 10;

-- 使用索引覆盖
SELECT id, name FROM users WHERE age > 25; -- 确保age有索引

-- 避免在WHERE子句中使用函数
-- 不好的写法
SELECT * FROM orders WHERE YEAR(order_date) = 2024;
-- 好的写法
SELECT * FROM orders WHERE order_date >= '2024-01-01' AND order_date < '2025-01-01';
                    </div>
                </div>
                
                <h3>⚙️ 配置优化</h3>
                <div class="example">
                    <h4>InnoDB配置优化</h4>
                    <div class="code">
# my.cnf配置示例
[mysqld]
# InnoDB缓冲池大小（建议设置为内存的70-80%）
innodb_buffer_pool_size = 1G

# InnoDB日志文件大小
innodb_log_file_size = 256M

# InnoDB日志缓冲区大小
innodb_log_buffer_size = 16M

# 并发线程数
innodb_thread_concurrency = 8

# 刷新方法
innodb_flush_method = O_DIRECT
                    </div>
                    
                    <h4>查询缓存配置</h4>
                    <div class="code">
# 查询缓存配置
query_cache_type = 1
query_cache_size = 128M
query_cache_limit = 2M

-- 查看查询缓存状态
SHOW STATUS LIKE 'Qcache%';
                    </div>
                </div>
                
                <h3>📈 索引优化策略</h3>
                <div class="example">
                    <div class="code">
-- 查看索引使用情况
SHOW INDEX FROM table_name;

-- 分析索引效率
SELECT 
    TABLE_NAME,
    INDEX_NAME,
    CARDINALITY,
    SUB_PART,
    NULLABLE
FROM information_schema.STATISTICS 
WHERE TABLE_SCHEMA = 'your_database';

-- 查找未使用的索引
SELECT 
    object_schema,
    object_name,
    index_name
FROM performance_schema.table_io_waits_summary_by_index_usage 
WHERE index_name IS NOT NULL 
AND count_star = 0;
                    </div>
                </div>
                
                <h3>🔧 性能调优工具</h3>
                <div class="example">
                    <h4>MySQL性能模式</h4>
                    <div class="code">
-- 启用性能模式
SET GLOBAL performance_schema = ON;

-- 查看最耗时的语句
SELECT 
    DIGEST_TEXT,
    COUNT_STAR,
    AVG_TIMER_WAIT/1000000000 AS avg_time_sec
FROM performance_schema.events_statements_summary_by_digest 
ORDER BY AVG_TIMER_WAIT DESC 
LIMIT 10;
                    </div>
                    
                    <h4>系统监控命令</h4>
                    <div class="code">
-- 查看当前正在执行的查询
SHOW PROCESSLIST;

-- 杀死长时间运行的查询
KILL QUERY process_id;

-- 查看表锁状态
SHOW OPEN TABLES WHERE In_use > 0;
                    </div>
                </div>
                
                <div class="warning">
                    <strong>⚠️ 性能优化注意事项：</strong>
                    <ul>
                        <li>优化前先进行性能基准测试</li>
                        <li>一次只改变一个配置参数</li>
                        <li>在测试环境中验证优化效果</li>
                        <li>监控优化后的系统表现</li>
                        <li>定期审查和调整配置</li>
                    </ul>
                </div>
                
                <div class="tip">
                    <strong>💡 性能优化优先级：</strong>
                    <ol>
                        <li><strong>查询优化</strong> - 优化SQL语句和索引</li>
                        <li><strong>配置调优</strong> - 调整MySQL配置参数</li>
                        <li><strong>硬件升级</strong> - 增加内存、使用SSD等</li>
                        <li><strong>架构优化</strong> - 读写分离、分库分表等</li>
                    </ol>
                </div>
            </div>
            
            <!-- 实战练习 -->
            <div id="practice" class="section">
                <h2>🎯 实战练习</h2>
                
                <h3>🏪 项目：小商店管理系统</h3>
                <div class="highlight">
                    <p>让我们创建一个简单的商店管理系统，包含商品信息：</p>
                </div>
                
                <h3>第一步：创建商品表</h3>
                <div class="code">
CREATE TABLE 商品表 (
    商品编号 INT PRIMARY KEY,
    商品名称 VARCHAR(100) NOT NULL,
    价格 DECIMAL(10,2),
    库存数量 INT,
    分类 VARCHAR(50)
);
                </div>
                
                <h3>第二步：添加商品数据</h3>
                <div class="code">
INSERT INTO 商品表 VALUES
(1001, '苹果', 5.50, 100, '水果'),
(1002, '香蕉', 3.20, 80, '水果'),
(1003, '牛奶', 12.00, 50, '饮品'),
(1004, '面包', 8.50, 30, '主食'),
(1005, '鸡蛋', 15.00, 200, '蛋类');
                </div>
                
                <h3>第三步：练习查询</h3>
                <div class="example">
                    <p>试试这些查询，看看结果：</p>
                    <div class="code">
-- 1. 查看所有商品
SELECT * FROM 商品表;

-- 2. 查找价格低于10元的商品
SELECT * FROM 商品表 WHERE 价格 < 10;

-- 3. 查找水果类商品
SELECT * FROM 商品表 WHERE 分类 = '水果';

-- 4. 按价格从高到低排序
SELECT * FROM 商品表 ORDER BY 价格 DESC;

-- 5. 统计商品总数
SELECT COUNT(*) AS 商品总数 FROM 商品表;
                    </div>
                </div>
                
                <h3>🎉 恭喜你！</h3>
                <div class="highlight">
                    <p>如果你能完成上面的练习，说明你已经掌握了MySQL的基础操作！</p>
                    <h4>📚 下一步学习建议：</h4>
                    <ul>
                        <li>🔗 学习表与表之间的关联（JOIN）</li>
                        <li>📊 学习更复杂的查询和统计</li>
                        <li>🛡️ 学习数据备份和安全</li>
                        <li>🚀 学习数据库性能优化</li>
                    </ul>
                </div>
                
                <div class="tip">
                    <strong>💡 学习小贴士：</strong>多练习是掌握数据库的关键，建议每天练习30分钟！
                </div>
            </div>
        </div>
        
        <footer style="text-align: center; padding: 20px; color: #666;">
            <p>🎓 MySQL入门教程 | 让数据库学习变得简单有趣</p>
        </footer>
    </div>
    
    <!-- 返回顶部按钮 -->
    <button id="backToTop" title="返回顶部">↑</button>
    
    <script>
        function showSection(sectionId) {
            // 隐藏所有章节
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                section.classList.remove('active');
            });
            
            // 显示选中的章节
            document.getElementById(sectionId).classList.add('active');
            
            // 更新导航状态
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // 滚动到顶部
            window.scrollTo(0, 0);
        }
        
        // 复制代码功能
        document.querySelectorAll('.code').forEach(codeBlock => {
            codeBlock.addEventListener('click', function() {
                navigator.clipboard.writeText(this.textContent).then(() => {
                    // 简单的提示
                    const originalBg = this.style.backgroundColor;
                    this.style.backgroundColor = '#d4edda';
                    setTimeout(() => {
                        this.style.backgroundColor = originalBg;
                    }, 1000);
                });
            });
        });
        
        // 返回顶部按钮功能
        const backToTopBtn = document.getElementById('backToTop');
        
        // 监听滚动事件
        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 300) {
                backToTopBtn.classList.add('show');
            } else {
                backToTopBtn.classList.remove('show');
            }
        });
        
        // 点击返回顶部
        backToTopBtn.addEventListener('click', function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
        
        // 进度条功能
        function updateProgressBar() {
            const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (winScroll / height) * 100;
            document.getElementById('progressBar').style.width = scrolled + '%';
        }
        
        window.addEventListener('scroll', updateProgressBar);
        
        // 搜索功能
        let searchIndex = [];
        
        // 构建搜索索引
        function buildSearchIndex() {
            const sections = document.querySelectorAll('.section');
            searchIndex = [];
            
            sections.forEach(section => {
                const title = section.querySelector('h2')?.textContent || '';
                const content = section.textContent;
                const id = section.id;
                
                // 添加章节标题
                if (title) {
                    searchIndex.push({
                        title: title,
                        content: title,
                        element: section,
                        id: id,
                        type: 'title'
                    });
                }
                
                // 添加子标题
                const subTitles = section.querySelectorAll('h3, h4');
                subTitles.forEach(subTitle => {
                    searchIndex.push({
                        title: subTitle.textContent,
                        content: subTitle.textContent,
                        element: subTitle,
                        id: id,
                        type: 'subtitle'
                    });
                });
                
                // 添加代码块
                const codeBlocks = section.querySelectorAll('.code');
                codeBlocks.forEach(code => {
                    const codeText = code.textContent.trim();
                    if (codeText.length > 10) {
                        searchIndex.push({
                            title: '代码示例',
                            content: codeText.substring(0, 100) + '...',
                            element: code,
                            id: id,
                            type: 'code'
                        });
                    }
                });
            });
        }
        
        // 执行搜索
        function performSearch() {
            const query = document.getElementById('searchInput').value.trim().toLowerCase();
            const resultsContainer = document.getElementById('searchResults');
            
            if (query.length < 2) {
                resultsContainer.style.display = 'none';
                return;
            }
            
            const results = searchIndex.filter(item => 
                item.content.toLowerCase().includes(query)
            ).slice(0, 10);
            
            if (results.length === 0) {
                resultsContainer.innerHTML = '<div class="search-result-item">未找到相关内容</div>';
            } else {
                resultsContainer.innerHTML = results.map(result => {
                    const highlightedContent = highlightText(result.content, query);
                    const typeIcon = result.type === 'title' ? '📖' : 
                                   result.type === 'subtitle' ? '📝' : '💻';
                    return `<div class="search-result-item" onclick="scrollToElement('${result.id}', '${result.type}')">
                        ${typeIcon} ${highlightedContent}
                    </div>`;
                }).join('');
            }
            
            resultsContainer.style.display = 'block';
        }
        
        // 高亮搜索关键词
        function highlightText(text, query) {
            const regex = new RegExp(`(${query})`, 'gi');
            return text.replace(regex, '<span class="search-highlight">$1</span>');
        }
        
        // 滚动到指定元素
        function scrollToElement(sectionId, type) {
            // 首先激活对应的章节
            showSection(sectionId);
            
            // 等待章节切换完成后再滚动
            setTimeout(() => {
                const section = document.getElementById(sectionId);
                if (section) {
                    section.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    
                    // 高亮显示目标区域
                    section.style.backgroundColor = '#fff3cd';
                    setTimeout(() => {
                        section.style.backgroundColor = '';
                    }, 2000);
                }
            }, 100);
            
            // 隐藏搜索结果
            document.getElementById('searchResults').style.display = 'none';
        }
        
        // 清除搜索
        function clearSearch() {
            document.getElementById('searchInput').value = '';
            document.getElementById('searchResults').style.display = 'none';
        }
        
        // 搜索输入事件
        document.getElementById('searchInput').addEventListener('input', function() {
            if (this.value.trim().length >= 2) {
                performSearch();
            } else {
                document.getElementById('searchResults').style.display = 'none';
            }
        });
        
        // 按Enter键搜索
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });
        
        // 点击页面其他地方隐藏搜索结果
        document.addEventListener('click', function(e) {
            const searchContainer = document.querySelector('.search-container');
            if (!searchContainer.contains(e.target)) {
                document.getElementById('searchResults').style.display = 'none';
            }
        });
        
        // 页面加载完成后构建搜索索引
        window.addEventListener('load', function() {
            buildSearchIndex();
        });
    </script>
</body>
</html>